!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jQuery"),require("Shiny")):"function"==typeof define&&define.amd?define(["jQuery","Shiny"],t):e.yonder=t(e.$,e.Shiny)}(this,function(l,e){"use strict";l=l&&l.hasOwnProperty("default")?l.default:l,e=e&&e.hasOwnProperty("default")?e.default:e;function i(e){var t=e.getAttribute("data-plugin"),n=e.getAttribute("data-action"),i=e.getAttribute("data-target");t&&n&&i&&(document.querySelector(i).classList.contains("show")||("tab"===t&&function(e){e.parentNode.querySelectorAll(".tab-pane[id]").forEach(function(e){document.querySelectorAll('[data-target="#'+e.id+'"]').forEach(function(e){return e.classList.remove("active")})})}(document.querySelector(i)),$(e)[t](n),"BUTTON"===e.tagName?(e.classList.contains("btn")&&window.setTimeout(function(){return e.classList.remove("active")},1),e.classList.contains("dropdown-item")&&window.setTimeout(function(){e.querySelector(".dropdown-toggle").classList.remove("active")},1)):"INPUT"===e.tagName&&window.setTimeout(function(){return e.classList.remove("active")},1)))}function n(e,t,n){$(e).on(n,t,function(e){var t=e.currentTarget;i(t)})}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function a(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?t(o,!0).forEach(function(e){var t,n,i;t=r,i=o[n=e],n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):t(o).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function u(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t,n){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&d(r,n.prototype),r}).apply(null,arguments)}function f(e){var n="function"==typeof Map?new Map:void 0;return(f=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return s(e,arguments,c(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),d(t,e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y,p,b=function(r){function e(e,t){var n,i=t?e+": "+t:e;return(n=r.call(this,i)||this).name=e,n.message=i,n}return u(e,r),e}(f(Error)),h=(y={},p=1,{set:function(e,t,n){void 0===e.key&&(e.key={key:t,id:p},p++),y[e.key.id]=n},get:function(e,t){if(!e||void 0===e.key)return null;var n=e.key;return n.key===t?y[n.id]:null},delete:function(e,t){if(void 0!==e.key){var n=e.key;n.key===t&&(delete y[n.id],delete e.key)}}}),g=function(e,t,n){h.set(e,t,n)},m=function(e,t){return h.get(e,t)},S=function(e,t){h.delete(e,t)},L=function(){function e(e,t,n){if("object"!=typeof e&&1!==e.nodeType)throw new b("Invalid Argument","`element` must be an element");this._element=e,this._type=t,this._value=null,this._callback=function(){}}var t=e.prototype;return t.content=function(e){this._element.innerHTML=e},t.dispose=function(){S(this._element,this._type),this._element=null},e.initialize=function(e,t,n){var i=m(e,t);i=i||new n(e)},e.find=function(e,t){return e.querySelectorAll(t)},e.getId=function(e){return e.id},e.getType=function(e){return null},e.getValue=function(e){throw new b("Unimplemented Method")},e.subscribe=function(e,t,n){var i=m(e,n);i&&(i._callback=t)},e.unsubscribe=function(e,t){var n=m(e,t);n&&(n._callback=function(){})},e.receiveMessage=function(e,t,n){var i=m(e,n);i&&t.forEach(function(e){console.log(e);var t=e[0],n=e[1];null!==n&&i[t](n)})},e.getState=function(e,t){throw"not implemented"},e.getRatePolicy=function(){return null},o(e,null,[{key:"VERSION",get:function(){return"0.1.2"}}]),e}(),A=Element.prototype,q=A.matches,T=A.closest;q=q||(Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;0<=--n&&t.item(n)!==this;);return-1<n}),T=T||function(e){var t=this;do{if(q.call(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null};function E(e,t){return T.call(e,t)}function I(e){return e?"object"==typeof e&&e.length?Array.prototype.slice.call(e):[e]:[]}function w(e){return[e.getAttribute("data-plugin"),e.getAttribute("data-action"),e.getAttribute("data-target")]}function k(e){return e&&1===e.nodeType}function _(e){e&&(e.length?I(e).forEach(function(e){return _(e)}):e.classList&&e.classList.add("active"))}function M(e){e&&(e.length?I(e).forEach(function(e){return M(e)}):e.classList&&e.classList.remove("active"))}function H(e,t,n){void 0===n&&(n=function(e){return e.value});for(var i=I(t).map(function(e){return k(e)?e:e.toString()}),r=(e=I(e)).map(n),o=[],l=0;l<i.length;l++){var a=i[l],u=e[k(a)?e.indexOf(a):r.indexOf(a)];void 0!==u&&o.push(u)}return o}var x="yonder.buttongroup",C="yonder-button-group",O="btn",P="disabled",N={INPUT:"."+C,CHILD:"."+O,PARENT_CHILD:"."+C+" ."+O,PLUGIN:"[data-plugin]"},B={CLICK:"click."+x},D=function(n){function t(e){var t;if(t=n.call(this,e,x)||this,!e.classList.contains(C))throw new b("Invalid Element","the target element is invalid");return t._counter=0,g(e,x,v(t)),t}u(t,n),o(t,null,[{key:"TYPE",get:function(){return x}}]);var e=t.prototype;return e.value=function(e){return void 0===e?this._value:(this._value=e,this._callback(),this)},e.content=function(e){this._element.innerHTML=e},e.disable=function(t){var e=this._element.querySelectorAll(N.CHILD);I(e).forEach(function(e){(void 0===t||-1<t.indexOf(e.value))&&(e.setAttribute(P,""),e.setAttribute("aria-disabled","true"))})},e.enable=function(t){var e=this._element.querySelectorAll(N.CHILD);I(e).forEach(function(e){(void 0===t||-1<t.indexOf(e.value))&&(e.removeAttribute(P),e.setAttribute("aria-disabled","false"))})},t.find=function(e){return n.find.call(this,e,"."+C)},t.initialize=function(e){n.initialize.call(this,e,x,t)},t.getType=function(e){return x},t.getValue=function(e){var t=m(e,x);return t?{value:t.value(),counter:t._counter++}:null},t.subscribe=function(e,t){n.subscribe.call(this,e,t,x)},t.unsubscribe=function(e){n.unsubscribe.call(this,e,x)},t.receiveMessage=function(e,t){n.receiveMessage.call(this,e,t,x)},t.ShinyInterface=function(){return a({},L,{},t)},t}(L);l(document).on(B.CLICK,N.PARENT_CHILD,function(e){var t=e.currentTarget,n=E(t,N.INPUT),i=m(n,x);i&&i.value(t.value)}),l(document).on(B.CLICK,""+N.PARENT_CHILD+N.PLUGIN,function(e){var t=e.currentTarget,n=w(t),i=n[0],r=n[1],o=n[2];i&&r&&o&&("tab"===i&&l(t).one("shown.bs.tab",function(e){return t.classList.remove("active")}),l(t)[i](r))}),e&&e.inputBindings.register(D.ShinyInterface(),x);var j="yonder.button",U={INPUT:".yonder-button",PLUGIN:"[data-plugin]"},V={CLICK:"click."+j},R=function(n){function t(e){var t;return(t=n.call(this,e,j)||this)._value=0,t._isLink="A"===e.tagName,g(e,j,v(t)),t}u(t,n),o(t,null,[{key:"TYPE",get:function(){return j}}]);var e=t.prototype;return e.value=function(e){return void 0===e?this._value:(this._value=e,this._callback(),this)},e.content=function(e){this._element.innerHTML=e},e.disable=function(e){this._isLink?this._element.classList.add("disabled"):this._element.setAttribute("disabled","")},e.enable=function(){this._isLink?this._element.classList.remove("disabled"):this._element.removeAttribute("disabled")},t.initialize=function(e){n.initialize.call(this,e,j,t)},t.find=function(e){return n.find.call(this,e,U.INPUT)},t.getValue=function(e){var t=m(e,j);return t?0===t.value()?null:t.value():null},t.subscribe=function(e,t){n.subscribe.call(this,e,t,j)},t.unsubscribe=function(e){n.unsubscribe.call(this,e,j)},t.receiveMessage=function(e,t){n.receiveMessage.call(this,e,t,j)},t.ShinyInterface=function(){return a({},L,{},t)},t}(L);l(document).on(V.CLICK,U.INPUT,function(e){var t=E(e.target,U.INPUT),n=m(t,j);n&&n.value(n.value()+1)}),l(document).on(V.CLICK,""+U.INPUT+U.PLUGIN,function(e){var t=E(e.target,U.INPUT),n=w(t),i=n[0],r=n[1],o=n[2];i&&r&&o&&("tab"===i&&l(t).one("shown.bs.tab",function(e){return t.classList.remove("active")}),l(t)[i](r))}),e&&e.inputBindings.register(R.ShinyInterface(),j);var z=new Shiny.InputBinding;$.extend(z,{find:function(e){return e.querySelectorAll(".yonder-checkbar[id]")},getValue:function(e){var t=e.querySelectorAll("input:checked:not(:disabled)");return 0===t.length?null:Array.prototype.map.call(t,function(e){return e.value})},subscribe:function(e,t){var n=$(e);n.on("click.yonder",function(e){return t()}),n.on("change.yonder",function(e){return t()}),n.on("checkbar.select.yonder",function(e){return t()})},unsubscribe:function(e){return $(e).off(".yonder")},receiveMessage:function(t,n){if(n.content&&(t.querySelectorAll(".btn").forEach(function(e){t.removeChild(e)}),t.insertAdjacentHTML("afterbegin",n.content)),n.selected&&(!0!==n.selected&&t.querySelectorAll("input:checked").forEach(function(e){e.checked=!1,e.parentNode.classList.remove("active")}),t.querySelectorAll("input").forEach(function(e){(!0===n.selected||-1<n.selected.indexOf(e.value))&&(e.checked=!0,e.parentNode.classList.add("active"))}),$(t).trigger("checkbar.select.yonder")),n.enable){var i=n.enable;!0===i?t.querySelectorAll(".btn").forEach(function(e){e.classList.remove("disabled"),e.children[0].removeAttribute("disabled")}):t.querySelectorAll(".btn").forEach(function(e){-1<i.indexOf(e.value)&&(e.classList.remove("disabled"),e.children[0].removeAttribute("disabled"))})}if(n.disable){var r=n.disable;!0===r?t.querySelectorAll(".btn").forEach(function(e){e.classList.add("disabled"),e.children[0].setAttribute("disabled","")}):t.querySelectorAll(".btn").forEach(function(e){-1<r.indexOf(e.value)&&(e.classList.add("disabled"),e.children[0].setAttribute("disabled",""))})}}}),Shiny.inputBindings.register(z,"yonder.checkbarInput");var G=new Shiny.InputBinding;$.extend(G,{find:function(e){return e.querySelectorAll(".yonder-checkbox[id]")},getValue:function(e){var t=e.querySelectorAll("input:checked:not(:disabled)");return 0===t.length?null:Array.prototype.map.call(t,function(e){return e.value})},subscribe:function(e,t){var n=$(e);n.on("change.yonder",function(e){return t()}),n.on("checkbox.select.yonder",function(e){return t()})},unsubscribe:function(e){return $(e).off(".yonder")},receiveMessage:function(t,n){if(n.content&&(t.querySelectorAll(".custom-checkbox").forEach(function(e){t.removeChild(e)}),t.insertAdjacentHTML("afterbegin",n.content)),n.selected&&(t.querySelectorAll("input:checked").forEach(function(e){e.checked=!1}),t.querySelectorAll("input").forEach(function(e){(!0===n.selected||-1<n.selected.indexOf(e.value))&&(e.checked=!0)}),$(t).trigger("checkbox.select.yonder")),n.enable){var i=n.enable;!0===i?t.querySelectorAll("input").forEach(function(e){e.removeAttribute("disabled")}):t.querySelectorAll("input").forEach(function(e){-1<i.indexOf(e.value)&&e.removeAttribute("disabled")})}if(n.disable){var r=n.disable;!0===r?t.querySelectorAll("input").forEach(function(e){e.setAttribute("disabled","")}):t.querySelectorAll("input").forEach(function(e){-1<r.indexOf(e.value)&&e.setAttribute("disabled","")})}n.valid&&(t.querySelector(".invalid-feedback").innerHTML="",t.querySelector(".valid-feedback").innerHTML=n.valid,t.querySelectorAll("input").forEach(function(e){e.classList.remove("is-invalid"),e.classList.add("is-valid")})),n.invalid&&(t.querySelector(".valid-feedback").innerHTML="",t.querySelector(".inavlid-feedback").innerHTML=n.invalid,t.querySelectorAll("input").forEach(function(e){e.classList.remove("is-valid"),e.classList.add("is-invalid")})),n.valid||n.invalid||(t.querySelector(".valid-feedback").innerHTML="",t.querySelector(".invalid-feedback").innerHTML="",t.querySelectorAll("input").forEach(function(e){e.classList.remove("is-valid"),e.classList.remove("is-invalid")}))}}),Shiny.inputBindings.register(G,"yonder.checkboxInput");var K=new Shiny.InputBinding;$.extend(K,{selectorActive:".active",selectorToggle:"input[data-toggle='dropdown']",find:function(e){return e.querySelectorAll(".yonder-chip[id]")},initialize:function(n){var e=$(n),i=$(n.querySelector(K.selectorToggle));e.on("input",function(e){var t=i[0].value;K._filter(n,t),0===K._visible(n).length?i.dropdown("hide"):i.dropdown("show")}),e.on("input change",function(e){i.dropdown("update")}),e.on("hide.bs.dropdown",function(e){null===n.querySelector("input:focus")&&(n.querySelector("input").value="",K._filter(n,""))}),e.on("click",".dropdown-item",function(e){e.stopPropagation(),K._add(n,e.currentTarget.value),i[0].focus()}),e.on("click",".chip",function(e){K._remove(n,e.currentTarget.value)});var t=+n.getAttribute("data-max");-1!=t&&K._selected(n).length>=t&&K._disable(n)},getValue:function(e){var t=e.querySelectorAll(".active");return 0===t.length?null:Array.prototype.map.call(t,function(e){return e.value})},subscribe:function(e,t){var n=$(e);n.on("click.yonder",".dropdown-item,.chip",function(e){return t()}),n.on("chip.select.yonder",function(e){return t()})},unsubscribe:function(e){return $(e).off(".yonder")},receiveMessage:function(t,e){var n=$(t);if(e.items&&e.chips&&(t.querySelector(".dropdown-menu").innerHTML=e.items,t.querySelector(".chips").innerHTML=e.chips),e.selected&&(!0===e.selected?t.querySelectorAll(".dropdown-item").forEach(function(e){K._add(t,e.value)}):(e.selected.reverse(),K._selected(t).forEach(function(e){K._remove(t,e.value)}),e.selected.forEach(function(e){K._add(t,e)})),n.trigger("chip.select.yonder")),void 0!==e.max&&null!==e.max&&t.setAttribute("data-max",e.max),e.enable){var i=e.enable;!0===i?K._enable(t):t.querySelectorAll(".dropdown-item,.chip").forEach(function(e){-1<i.indexOf(e.value)&&(e.removeAttribute("disabled"),e.classList.remove("disabled"))})}if(e.disable){var r=e.disable;!0===r?K._disable(t):t.querySelectorAll(".dropdown-item,.chip").forEach(function(e){-1<r.indexOf(e.value)&&(e.setAttribute("disabled",""),e.classList.add("disabled"))})}},_visible:function(e){return e.querySelectorAll(":not(.selected),:not(.filtered)")},_selected:function(e){return e.querySelectorAll(".selected")},_items:function(e,t){return Array.prototype.filter.call(e.querySelectorAll(".dropdown-item"),function(e){return e.value===t})},_chips:function(e,t){return Array.prototype.filter.call(e.querySelectorAll(".chip"),function(e){return e.value===t})},_enable:function(e){var t=e.querySelector("input");t.removeAttribute("disabled"),t.classList.remove("disabled")},_disable:function(e){var t=e.querySelector("input");t.setAttribute("disabled",""),t.classList.add("disabled")},_filter:function(e,t){t=t.toLowerCase(),e.querySelectorAll(".dropdown-item").forEach(function(e){-1!==e.innerText.toLowerCase().indexOf(t)?e.classList.remove("filtered"):e.classList.add("filtered")})},_add:function(e,t){var n=$(e.querySelector(K.selectorToggle));K._items(e,t).forEach(function(e){e.classList.add("selected")});var i=e.querySelector(".chips");K._chips(e,t).forEach(function(e){i.insertBefore(i.removeChild(e),i.firstChild),e.classList.add("active")}),0===K._visible(e).length&&n.dropdown("hide");var r=+e.getAttribute("data-max");-1==r||K._selected(e).length<r?n.dropdown("update"):(n.dropdown("hide"),K._disable(e))},_remove:function(e,t){var n=+e.getAttribute("data-max");K._chips(e,t).forEach(function(e){e.classList.remove("active")}),K._items(e,t).forEach(function(e){e.classList.remove("selected")}),(-1==n||K._selected(e).length<n)&&K._enable(e)}}),Shiny.inputBindings.register(K,"yonder.chipInput");var Y=new Shiny.InputBinding;$.extend(Y,{find:function(e){return e.querySelectorAll(".yonder-file[id]")},initialize:function(t){var e=$(t);e.on("dragover",function(e){e.stopPropagation(),e.preventDefault()}),e.on("dragcenter",function(e){e.stopPropagation(),e.preventDefault()}),e.on("drop",function(e){e.stopPropagation(),e.preventDefault(),Y._upload(t,e.originalEvent.dataTransfer.files)}),e.on("change",function(e){Y._upload(t)})},getValue:function(e){return null},receiveMessage:function(e,t){var n=e.querySelector("input");t.enable&&n.removeAttribute("disabled"),t.disable&&n.setAttribute("disabled",""),t.valid&&(e.querySelector(".valid-feedback").innerHTML=t.valid,n.classList.add("is-valid")),t.invalid&&(e.querySelector(".invalid-feedback").innerHTML=t.invalid,n.classList.remove("is-invalid")),t.valid||t.invalid||(e.querySelector(".valid-feedback").innerHTML="",e.querySelector(".invalid-feedback").innerHTML="",n.classList.remove("is-valid"),n.classList.remove("is-invalid"))},_post:function(e,t,n,i,r){var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/octet-stream"),o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&200==o.status&&i&&Shiny.shinyapp.makeRequest("uploadEnd",[t,r.id],function(e){r.querySelector("input[type='file']").value=""},function(e){console.error("uploadEnd request failed for "+r.id+": "+e)})},o.send(n)},_upload:function(r,o){var l=this,e=r.querySelector("input[type='file']");if(void 0===o&&(o=e.files),o){var t=(o=e.hasAttribute("multiple")?Array.prototype.slice.call(o):Array.prototype.slice.call(o,0,1)).map(function(e){return{name:e.name,size:e.size,type:e.type}});Shiny.shinyapp.makeRequest("uploadInit",[t],function(e){for(var t=e.jobId,n=e.uploadUrl,i=0;i<o.length;i++)l._post(n,t,o[i],i===o.length-1,r)},function(e){console.error("uploadInit request failed for "+r.id+": "+e)})}}}),document.addEventListener("DOMContentLoaded",function(){bsCustomFileInput.init(".yonder-file[id] input[type='file']")}),Shiny.inputBindings.register(Y,"yonder.fileInput");var F=new Shiny.InputBinding;$.extend(F,{find:function(e){return e.querySelectorAll(".yonder-form[id]")},initialize:function(t){var e=$(document),n=$(t),i={},r=null;t.querySelectorAll(".yonder-form-submit").forEach(function(e){e.setAttribute("type","submit")}),e.on("shiny:inputchanged.yonder",function(e){if(e.el&&"event"!==e.priority)return e.el.id===t.id?(Shiny.onInputChange(t.id,r,{priority:"event"}),void e.preventDefault()):void(t.contains(e.el)&&(i[e.name]=e.value,e.preventDefault()))}),n.on("click.yonder",".yonder-form-submit",function(e){r=e.currentTarget.value}),n.on("submit.yonder",function(e){Object.keys(i).forEach(function(e){Shiny.onInputChange(e,i[e],{priority:"event"})})})},getValue:function(e){return null},subscribe:function(e,t){$(e).on("submit.yonder",function(e){return t()})},unsubscribe:function(e){$(e).off(".yonder"),$(document).off("shiny:inputchanged.yonder")}}),Shiny.inputBindings.register(F,"yonder.formInput");var X=new Shiny.InputBinding;$.extend(X,{find:function(e){return e.querySelectorAll(".yonder-link[id]")},initialize:function(t){t.value=0,$(t).on("click",function(e){return t.value=+t.value+1}),n(t,null,"click")},getValue:function(e){return 0<+e.value?+e.value:null},subscribe:function(e,t){var n=$(e);n.on("click.yonder",function(e){return t()}),n.on("link.value.yonder",function(e){return t()})},unsubscribe:function(e){return $(e).off(".yonder")},receiveMessage:function(e,t){t.content&&(e.innerHTML=t.content),null!==t.value&&void 0!==t.value&&(e.value=t.value,$(e).trigger("link.value.yonder")),t.enable&&(e.classList.remove("disabled"),e.removeAttribute("disabled")),t.disable&&(e.classList.add("disabled"),e.setAttribute("disabled",""))}}),Shiny.inputBindings.register(X,"yonder.linkInput");var Q=new Shiny.InputBinding;$.extend(Q,{find:function(e){return e.querySelectorAll(".yonder-list-group[id]")},initialize:function(t){var e=$(t);e.on("click",".list-group-item-action:not(.active):not(.disabled)",function(e){t.querySelectorAll(".active").forEach(function(e){e.classList.remove("active")}),e.currentTarget.classList.add("active")}),e.on("click",".list-group-item-action.active:not(.disabled)",function(e){e.currentTarget.classList.remove("active")}),n(t,".list-group-item:not(.disabled)","click")},getValue:function(e){var t=e.querySelectorAll(".list-group-item-action.active:not(.disabled)");return 0===t.length?null:Array.prototype.slice.call(t).map(function(e){return e.value})},subscribe:function(e,t){var n=$(e);n.on("click.yonder",function(e){return t()}),n.on("listgroup.select.yonder",function(e){return t()})},unsubcribe:function(e){return $(e).off(".yonder")},receiveMessage:function(t,n){if(n.content&&(t.querySelectorAll(".list-group-item").forEach(function(e){t.removeChild(e)}),t.insertAdjacentHTML("afterbegin",n.content)),n.selected&&(!0!==n.selected&&t.querySelectorAll(".list-group-item.active").forEach(function(e){e.classList.remove("active")}),t.querySelectorAll(".list-group-item").forEach(function(e){(!0===n.selected||-1<n.selected.indexOf(e.value))&&e.classList.add("active")}),$(t).trigger("listgroup.select.yonder")),n.enable){var i=n.enable;!0===i?t.querySelectorAll(".list-group-item").forEach(function(e){e.classList.remove("disabled")}):t.querySelectorAll(".list-group-item").forEach(function(e){-1<i.indexOf(e.value)&&e.classList.remove("disabled")})}if(n.disable){var r=n.disable;!0===r?t.querySelectorAll(".list-group-item").forEach(function(e){e.classList.add("disabled")}):t.querySelectorAll(".list-group-item").forEach(function(e){-1<r.indexOf(e.value)&&e.classList.add("disabled")})}}}),Shiny.inputBindings.register(Q,"yonder.listGroupInput");var J="yonder.menu",W="yonder-menu",Z="dropdown-item",ee={INPUT:"."+W,CHILD:"."+Z,PARENT_CHILD:"."+W+" ."+Z,TOGGLE:"[data-toggle='dropdown']"},te={CLICK:"click."+J,CLOSE:"hide.bs.dropdown",CLOSED:"hidden.bs.dropdown"},ne=function(n){function i(e){var t;return(t=n.call(this,e,J)||this)._counter=0,g(e,J,v(t)),t}u(i,n);var e=i.prototype;return e.value=function(e){return void 0===e?this._value:(this._value=e,this._callback(),this)},e.select=function(e){var t=this._element.querySelectorAll(ee.CHILD),n=H(t,e);M(t),n.length&&(_(n[0]),this.value(n[0].value))},i.initialize=function(e){var t=m(e,J);t=t||new i(e)},i.find=function(e){return n.find.call(this,e,ee.INPUT)},i.getType=function(e){return J},i.getValue=function(e){var t=m(e,J);return t?{value:t.value(),counter:t._counter++}:null},i.subscribe=function(e,t){n.subscribe.call(this,e,t,J)},i.unsubscribe=function(e){n.unsubscribe.call(this,e,J)},i.receiveMessage=function(e,t){n.receiveMessage.call(this,e,t,J)},i.ShinyInterface=function(){return a({},L,{},i)},o(i,null,[{key:"TYPE",get:function(){return J}},{key:"Selector",get:function(){return ee}},{key:"Event",get:function(){return te}}]),i}(L);l(document).on(te.CLICK,ee.PARENT_CHILD,function(e){var t=E(e.target,ee.CHILD);if(t){var n=E(t,ee.INPUT),i=m(n,J);i&&i.select(t)}}),e&&e.inputBindings.register(ne.ShinyInterface(),J);var ie="yonder.nav",re="yonder-nav",oe="nav-link",le={INPUT:"."+re,CHILD:"."+oe,PARENT_CHILD:"."+re+" ."+oe,ACTIVE:".active",DISABLED:".disabled",PLUGIN:"[data-plugin]",NAV_ITEM:"."+"nav-item",MENU_TOGGLE:ne.Selector.TOGGLE,MENU_ITEM:ne.Selector.CHILD},ae={CLICK:"click."+ie},ue=function(n){function i(e){var t;return t=n.call(this,e,ie)||this,g(e,ie,v(t)),t}u(i,n);var e=i.prototype;return e.value=function(e){return void 0===e?this._value:(this._value=e,this._callback(),this)},e.select=function(e){var t=this._element.querySelectorAll(le.CHILD),n=H(t,e);M(t),I(t).forEach(function(e){if(!(-1<n.indexOf(e))){var t=m(e.parentNode,ne.TYPE);t&&t.select(null)}}),n.length&&(_(n[0]),this.value(n[0].value))},e.disable=function(e){},e.enable=function(e){},i.initialize=function(e){var t=m(e,ie);t=t||new i(e)},i.find=function(e){return n.find.call(this,e,le.INPUT)},i.getValue=function(e){var t=m(e,ie);return t?t.value():null},i.subscribe=function(e,t){n.subscribe.call(this,e,t,ie)},i.unsubscribe=function(e){n.unsubscribe.call(this,e,ie)},i.receiveMessage=function(e,t){n.receiveMessage.call(this,e,t,ie)},i.ShinyInterface=function(){return a({},L,{},i)},i}(L);l(document).on(ae.CLICK,le.PARENT_CHILD+":not("+le.MENU_TOGGLE+")",function(e){var t=E(e.target,le.INPUT),n=m(t,ie);if(n){console.log("hmm");var i=E(e.target,le.CHILD);n.select(i)}}),l(document).on(ae.CLICK,""+le.PARENT_CHILD+le.PLUGIN,function(e){var t=E(e.target,le.CHILD),n=w(t),i=n[0],r=n[1];!function(){for(var e=0;e++;)if(!(e<0||arguments.length<=e?void 0:arguments[e]))return!1;return!0}(i,r,n[2])||(M(t),l(t)[i](r))}),l(document).on(ae.CLICK,le.INPUT+" "+le.MENU_ITEM,function(e){var t=E(e.target,le.INPUT),n=m(t,ie);if(n){var i=E(e.target,le.NAV_ITEM).querySelector(le.CHILD);n.select(i)}}),e&&e.inputBindings.register(ue.ShinyInterface(),ie),e.addCustomMessageHandler("yonder:pane",function(e){if(void 0!==e.type&&void 0!==e.data&&void 0!==e.data.target){var t=document.getElementById(e.data.target);null!==t&&("show"===e.type?function(n){if(null!==n&&!n.classList.contains("show"))if(n.parentElement.classList.contains("tab-content")){var i=n.parentElement.querySelector(".active");bootstrap.Tab.prototype._activate(n,n.parentElement,function(){var e=l.Event("hidden.bs.tab",{relatedTarget:n}),t=l.Event("shown.bs.tab",{relatedTarget:i});l(i).trigger(e),l(n).trigger(t)})}else console.warn("nav pane "+n.id+" is missing a nav content parent element")}(t):"hide"===e.type&&function(t){if(null!==t&&t.classList.contains("show"))if(t.parentElement.classList.contains("tab-content")){var e=document.createElement("div");bootstrap.Tab.prototype._activate(e,t.parentElement,function(){var e=l.Event("hidden.bs.tab",{relatedTarget:t});l(t).trigger(e)})}else console.warn("nav pane "+t.id+" is missing a nav content parent element")}(t))}});var ce=new Shiny.InputBinding;$.extend(ce,{find:function(e){return e.querySelectorAll(".yonder-radio[id]")},initialize:function(e){n(e,"input[type='radio']","input")},getValue:function(e){var t=e.querySelectorAll(".custom-radio > input:checked:not(:disabled)");return 0===t.length?null:Array.prototype.slice.call(t).map(function(e){return e.value})},subscribe:function(e,t){var n=$(e);n.on("change.yonder",function(e){return t()}),n.on("radio.select.yonder",function(e){return t()})},unsubscribe:function(e){$(e).off(".yonder")},receiveMessage:function(t,n){if(n.content&&(t.querySelectorAll(".custom-radio").forEach(function(e){t.removeChild(e)}),t.insertAdjacentHTML("afterbegin",n.content)),n.selected&&(t.querySelectorAll("input").forEach(function(e){-1<n.selected.indexOf(e.value)?e.checked=!0:e.checked=!1}),$(t).trigger("radio.select.yonder")),n.enable){var i=n.enable;!0===i?t.querySelectorAll(".custom-radio > input").forEach(function(e){e.removeAttribute("disabled")}):t.querySelectorAll(".custom-radio > input").forEach(function(e){-1<i.indexOf(e.value)&&e.removeAttribute("disabled")})}if(n.disable){var r=n.disable;!0===r?t.querySelectorAll(".custom-radio > input").forEach(function(e){e.setAttribute("disabled","")}):t.querySelectorAll(".custom-radio > input").forEach(function(e){-1<r.indexOf(e.value)&&e.setAttribute("disabled","")})}n.valid&&(t.querySelector(".valid-feedback").innerHTML=n.valid,t.querySelectorAll(".custom-control-input").forEach(function(e){e.classList.add("is-valid")})),n.invalid&&(t.querySelector(".invalid-feedback").innerHTML=n.invalid,t.querySelectorAll(".custom-control-input").forEach(function(e){e.classList.add("is-invalid")})),n.valid||n.invalid||(t.querySelector(".valid-feedback").innerHTML="",t.querySelector(".invalid-feedback").innerHTML="",t.querySelectorAll(".custom-control-input").forEach(function(e){e.classList.remove("is-valid"),e.classList.remove("is-invalid")}))}}),Shiny.inputBindings.register(ce,"yonder.radioInput");var de=new Shiny.InputBinding;$.extend(de,{find:function(e){return e.querySelectorAll(".yonder-radiobar[id]")},initialize:function(e){n(e,"input[type='radio']","change")},getValue:function(e){var t=e.querySelectorAll("input:checked:not(:disabled)");return 0===t.length?null:Array.prototype.slice.call(t).map(function(e){return e.value})},subscribe:function(e,t){var n=$(e);n.on("click.yonder",function(e){return t()}),n.on("change.yonder",function(e){return t()})},unsubscribe:function(e){$(e).off(".yonder")},receiveMessage:function(e,t){if(t.content&&(e.innerHTML=t.content),t.enable){var n=t.enable;!0===n?e.querySelectorAll(".btn").forEach(function(e){e.classList.remove("disabled"),e.children[0].removeAttribute("disabled")}):e.querySelectorAll("input").forEach(function(e){-1<n.indexOf(e.value)&&(e.parentNode.classList.remove("disabled"),e.removeAttribute("disabled"))})}if(t.disable){var i=t.disable;!0===i?e.querySelectorAll(".btn").forEach(function(e){e.classList.add("disabled"),e.children[0].setAttribute("disabled","")}):e.querySelectorAll("input").forEach(function(e){-1<i.indexOf(e.value)&&(e.parentNode.classList.add("disabled"),e.setAttribute("disabled",""))})}}}),Shiny.inputBindings.register(de,"yonder.radiobarInput");var se=new Shiny.InputBinding;$.extend(se,{find:function(e){return e.querySelectorAll(".yonder-range[id]")},getId:function(e){return e.id},getValue:function(e){return+e.children[0].value},subscribe:function(e,t){var n=$(e);n.on("input.yonder",t(!0)),n.on("range.value.yonder")},unsubscribe:function(e){return $(e).off(".yonder")},receiveMessage:function(e,t){var n=e.children[0];t.value&&(n.value=t.value),t.enable&&n.removeAttribute("disabled"),t.disable&&n.setAttribute("disabled","")}}),Shiny.inputBindings.register(se,"yonder.rangeInput");var fe=new Shiny.InputBinding;$.extend(fe,{find:function(e){return e.querySelectorAll(".yonder-select[id]")},initialize:function(n){var i=$(n);i.on("click",".dropdown-item",function(e){i[0].querySelector("input").placeholder=e.currentTarget.innerText;var t=i[0].querySelector(".active");t&&t.classList.remove("active"),e.currentTarget.classList.add("active")});var r=$(n.querySelector("input"));i.on("input change","input",function(e){var t=r[0].value.toLowerCase();n.querySelectorAll(".dropdown-item").forEach(function(e){-1===e.innerText.toLowerCase().indexOf(t)?e.classList.add("filtered"):e.classList.remove("filtered")}),r.dropdown("update")}),i.on("hide.bs.dropdown",function(e){r[0].value="",n.querySelectorAll(".filtered").forEach(function(e){e.classList.remove("filtered")})})},getValue:function(e){var t=e.querySelectorAll(".dropdown-item.active:not(.disabled)");return 0===t.length?null:Array.prototype.slice.call(t).map(function(e){return e.value})},subscribe:function(e,t){var n=$(e);n.on("click.yonder",".dropdown-item",function(e){return t()}),n.on("select.select.yonder",function(e){return t()})},unsubscribe:function(e){$(e).off(".yonder")},receiveMessage:function(t,n){if(n.content&&(t.querySelector(".dropdown-menu").innerHTML=n.content),n.selected&&(t.querySelectorAll(".dropdown-item").forEach(function(e){!0===n.selected||-1<n.selected.indexOf(e.value)?(e.classList.add("active"),t.querySelector("input").placeholder=e.innerText):e.classList.remove("active")}),$(t).trigger("select.select.yonder")),n.enable){var i=n.enable;!0===i?t.querySelector("input").removeAttribute("disabled"):t.querySelectorAll(".dropdown-item").forEach(function(e){-1<i.indexOf(e.value)&&e.classList.remove("disabled")})}if(n.disable){var r=n.disable;!0===r?t.querySelector("input").setAttribute("disabled",""):t.querySelectorAll(".dropdown-item").forEach(function(e){-1<r.indexOf(e.value)&&e.classList.add("disabled")})}if(n.valid&&(t.querySelector("input").classList.add("is-valid"),t.querySelector(".valid-feedback").innerHTML=n.valid),n.invalid&&(t.querySelector("input").classList.add("is-invalid"),t.querySelector(".invalid-feedback").innerHTML=n.invalid),!n.valid&&!n.invalid){var e=t.querySelector("input");e.classList.remove("is-valid"),e.classList.remove("is-invalid"),t.querySelector(".valid-feedback").innerHTML="",t.querySelector(".invalid-feedback").innerHTML=""}}}),Shiny.inputBindings.register(fe,"yonder.selectInput");var ve=new Shiny.InputBinding;$.extend(ve,{find:function(e){return e.querySelectorAll(".yonder-group-select[id]")},getValue:function(e){var t=e.querySelectorAll(".input-group-prepend .input-group-text, select, .input-group-append .input-group-text");return Array.prototype.slice.call(t).map(function(e){return/^(DIV|SPAN)$/.test(e.tagName)?e.innerText:e.value||null}).filter(function(e){return null!==e})},getType:function(){return"yonder.group.select"},subscribe:function(e,t){var n=$(e);0<e.querySelectorAll(".btn").length?n.on("click",".dropdown-item",function(e){return t()}):(n.on("change",function(e){return t()}),n.on("groupselect.select.yonder",function(e){return t()}))},receiveMessage:function(e,t){var n=e.querySelector("input[data-toggle='dropdown']");t.content&&(n.innerHTML=t.content),t.selected&&(n.querySelectorAll("option").forEach(function(e){-1<t.selected.indexOf(e.value)?e.setAttribute("selected",""):e.removeAttribute("selected")}),$(e).trigger("groupselect.select.yonder")),t.enable&&(!0===t.enable?n.removeAttribute("disabled"):n.querySelectorAll("option").forEach(function(e){e.removeAttribute("disabled")}));t.disable&&(t.disable?n.setAttribute("disabled",""):n.querySelectorAll("option").forEach(function(e){e.setAttribute("disabled","")}));t.valid&&(e.querySelector("valid-feedback").innerHTML=t.valid,n.classList.remove("is-invalid"),n.classList.add("is-valid")),t.invalid&&(e.querySelector("invalid-feedback").innerHTML=t.invalid,n.classList.remove("is-valid"),n.classList.add("is-invalid")),t.valid||t.invalid||(n.classList.remove("is-valid"),n.classList.remove("is-invalid"),e.querySelector("invalid-feedback").innerHTML="",e.querySelector("valid-feedback").innerHTML="")}}),Shiny.inputBindings.register(ve,"yonder.groupSelectInputBinding");var ye=new Shiny.InputBinding;$.extend(ye,{find:function(e){return e.querySelectorAll(".yonder-textual[id]")},getValue:function(e){var t=e.children[0];return""===t.value?null:"number"===t.type?Number(t.value):t.value},subscribe:function(e,t){var n=$(e);n.on("change.yonder",function(e){return t(!0)}),n.on("input.yonder",function(e){return t(!0)}),n.on("textual.value.yonder",function(e){return t(!0)})},unsubscribe:function(e){return $(e).off(".yonder")},getRatePolicy:function(){return{policy:"debounce",delay:250}},receiveMessage:function(e,t){null!==t.value&&(e.querySelector("input").value=t.value,$(e).trigger("textual.value.yonder")),t.enable&&e.children[0].removeAattribute("disabled"),t.disable&&e.children[0].setAttribute("disabled",""),t.valid&&(e.querySelector(".valid-feedback").innerHTML=t.valid,e.classList.remove("is-invalid"),e.classList.add("is-valid")),t.invalid&&(e.querySelector(".invalid-feedback").innerHTML=t.invalid,e.classList.remove("is-valid"),e.classList.add("is-invalid")),t.valid||t.invalid||(e.querySelector(".valid-feedback").innerHTML="",e.querySelector(".invalid-feedback").innerHTML="",e.children[0].classList.remove("is-valid"),e.children[0].classList.remove("is-invalid"))}}),Shiny.inputBindings.register(ye,"yonder.textualInput");var pe=new Shiny.InputBinding;return $.extend(pe,{find:function(e){return e.querySelectorAll(".yonder-group-text[id]")},getValue:function(e){var t=e.querySelectorAll(".input-group-prepend .input-group-text, input, .input-group-append .input-group-text");return Array.prototype.slice.call(t).map(function(e){return/^(DIV|SPAN)$/.test(e.tagName)?e.innerText:e.value||null}).filter(function(e){return null!==e})},getType:function(){return"yonder.group.text"},getRatePolicy:function(e){return{policy:"debounce",delay:250}},subscribe:function(e,t){var n=$(e);0<e.querySelectorAll(".btn").length?(n.on("click.yonder",".dropdown-item",function(e){return t()}),n.on("click.yonder",".btn:not(.dropdown-toggle",function(e){return t()})):(n.on("input.yonder",function(e){return t(!0)}),n.on("change.yonder",function(e){return t(!0)}),n.on("textual.value.yonder",function(e){return t()}))},unsubscribe:function(e){return $(e).off(".yonder")},receiveMessage:function(e,t){var n=e.querySelector("input");t.value&&(n.value=t.value,$(e).trigger("textual.value.yonder")),t.enable&&n.removeAttribute("disabled"),t.disable&&n.setAttribute("disabled",""),t.valid&&(e.querySelector("valid-feedback").innerHTML=t.valid,n.classList.remove("is-invalid"),n.classList.add("is-valid")),t.invalid&&(e.querySelector("invalid-feedback").innerHTML=t.invalid,n.classList.remove("is-valid"),n.classList.add("is-invalid")),t.valid||t.invalid||(n.classList.remove("is-valid"),n.classList.remove("is-invalid"),e.querySelector("invalid-feedback").innerHTML="",e.querySelector("valid-feedback").innerHTML="")}}),Shiny.inputBindings.register(pe,"yonder.groupTextInput"),Shiny.addCustomMessageHandler("yonder:collapse",function(e){if(void 0===e.type||void 0===e.data||void 0===e.data.target)return!1;if("show"!==e.type&&"hide"!==e.type&&"toggle"!==e.type)return!1;var t=document.getElementById(e.data.target);return null!==t&&($(t).collapse(e.type),!0)}),Shiny.addCustomMessageHandler("yonder:download",function(t){if(!(t.filename&&t.token&&t.key))throw"invalid download event";var e="/session/"+t.token+"/download/"+t.key,n=window.navigator.userAgent;if(!0===/MSIE/.test(n)){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){return saveAs(i.response,t.filename)},i.send()}else fetch(e).then(function(e){return e.blob()}).then(function(e){saveAs(e,t.filename)})}),Shiny.addCustomMessageHandler("yonder:content",function(e){e.type&&("replace"===e.type?function(t){if(t.id){var n=document.getElementById(t.id);n&&(t.dependencies&&Shiny.renderDependencies(t.dependencies),t.content&&(Shiny.unbindAll(n),n.innerHTML=t.content,Shiny.initializeInputs(n),Shiny.bindAll(n)),t.attrs&&Object.keys(t.attrs).forEach(function(e){n.setAttribute(e,t.attrs[e])}))}}(e.data):"remove"===e.type?function(e){if(e.id){var t=document.getElementById(e.id);t&&(Shiny.unbindAll(t),t.innerHTML="")}}(e.data):console.warn('no content "'+e.type+'" method'))}),$(function(){document.body.insertAdjacentHTML("beforeend","<div class='yonder-modals'></div>")}),Shiny.addCustomMessageHandler("yonder:modal",function(e){if(void 0===e.type)return!1;var t,n;"close"===e.type?(t=e.data,0!==(n=document.querySelector(".yonder-modals").childNodes).length&&(t.id&&(n=Array.prototype.filter.call(n,function(e){return e.id===t.id})),n.forEach(function(e){e.classList.contains("yonder-modal")&&$(e).modal("hide")}))):"show"===e.type?function(e){if(e.id){var t=document.getElementById(e.id);if(t&&t.classList.contains("yonder-modal"))return console.warn("ignoring modal with duplicate id")}e.dependencies&&Shiny.renderDependencies(e.dependencies);var n=document.querySelector(".yonder-modals");n.insertAdjacentHTML("beforeend",e.content);var i=n.querySelector(".yonder-modal:last-child");Shiny.initializeInputs(i),Shiny.bindAll(i),$(i).one("hidden.bs.modal",function(e){i.id&&(Shiny.onInputChange(i.id,!0),setTimeout(function(){return Shiny.onInputChange(i.id,null)},100)),n.removeChild(i)}),$(i).modal("show")}(e.data):console.warn("no modal "+e.type+" method")}),Shiny.addCustomMessageHandler("yonder:popover",function(e){if(e.data.id&&document.getElementById(e.data.id)){var t,n,i,r;"show"===e.type?(i=e.data,(r=$(document.getElementById(i.id))).popover({content:function(){},placement:i.placement,template:i.content,title:function(){},trigger:"manual"}),i.duration&&setTimeout(function(){return r.popover("hide")},i.duration),r.popover("show")):"close"===e.type?(t=e.data,(n=document.getElementById(t.id))&&$(n).popover("hide")):console.warn('no "'+e.type+'" popover method')}}),$(function(){$('[data-toggle="tooltip"]').tooltip()}),$(function(){document.body.insertAdjacentHTML("beforeend","<div class='yonder-toasts'></div>"),$(".yonder-toasts").on("hidden.bs.toast",".toast",function(e){if(e.currentTarget.hasAttribute("data-action")){var t=e.currentTarget.getAttribute("data-action");Shiny.onInputChange(t,!0),setTimeout(function(){return Shiny.onInputChange(t,null)},100)}e.delegateTarget.removeChild(e.currentTarget)})}),Shiny.addCustomMessageHandler("yonder:toast",function(e){var t,n;e.type&&("show"===e.type?(n=e.data,document.querySelector(".yonder-toasts").insertAdjacentHTML("beforeend",n.content),$(".yonder-toasts > .toast:last-child").toast("show")):"close"===e.type?(e.data,(t=document.querySelectorAll(".yonder-toasts .toast")).length&&$(t).toast("hide")):console.warn("no toast "+e.type+" method"))}),{ButtonGroupInput:D,ButtonInput:R,MenuInput:ne,NavInput:ue}});