"use strict";$(function(){$('[data-toggle="tooltip"]').tooltip()}),$(function(){$('[data-toggle="popover"]').popover()}),$(document).on("shiny:connected",function(){$('.dull-submit[data-type="submit"]').attr("type","submit")}),Shiny.addCustomMessageHandler("dull:updatecollapse",function(n){var t=$(n.id);if(0===t.length||!n.action)return!1;t.collapse(n.action)});var alertInputBinding=new Shiny.InputBinding;$.extend(alertInputBinding,{find:function(n){return $(n).find(".dull-alert[id] .close").parent()},getValue:function(n){var t=$(n).data("closed")||null;return console.log(t),t},getState:function(n,t){return{value:this.getValue(n)}},subscribe:function(n,t){$(n).on("closed.bs.alert.alertInputBinding",function(i){$(n).data("closed",!0),t()})},unsubscribe:function(n){$(n).off(".alertInputBinding")}}),Shiny.inputBindings.register(alertInputBinding,"dull.alertInput");var breadcrumbOutputBinding=new Shiny.OutputBinding;$.extend(breadcrumbOutputBinding,{find:function(n){return $(n).find(".buckle-breadcrumb")},getValue:function(n){return $(n).find("li:last").text()}});var buttonInputBinding=new Shiny.InputBinding;$.extend(buttonInputBinding,{find:function(n){return $(n).find(".dull-button[id]")},getValue:function(n){var t=$(n);return"0"===t.data("count")?null:{count:parseInt(t.data("count"),10),value:t.data("value")}},getState:function(n,t){return{value:this.getValue(n)}},getType:function(n){return"dull.button"},subscribe:function(n,t){$(n).on("click.buttonInputBinding",function(i){var u=$(n);u.data("count",parseInt(u.data("count"),10)+1),t()}),$(n).on("change.buttonInputBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".buttonInputBinding")},receiveMessage:function(n,t){var i=$(n);null!==t.count&&i.data("count",t.count),t.context&&(i.attr("class",function(n,t){return t.replace(/btn-(?:outline-)?(?:primary|secondary|link|success|info|warning|danger)/,"")}),i.addClass(t.context)),(null!==t.count||t.context)&&i.trigger("change")}}),Shiny.inputBindings.register(buttonInputBinding,"dull.buttonInput");var buttonGroupInputBinding=new Shiny.InputBinding;$.extend(buttonGroupInputBinding,{find:function(n){return $(n).find(".dull-button-group[id]")},getValue:function(n){var t=$(n);return{count:t.data("count")||null,value:t.data("value")||null}},getState:function(n,t){return{value:this.getValue(n)}},subscribe:function(n,t){$(n).on("click.buttonGroupInputBinding",function(n){t()}),$(n).on("change.buttonGroupInputBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".buttonGroupInputBinding")}}),Shiny.inputBindings.register(buttonGroupInputBinding,"dull.buttonGroupInput"),$(document).ready(function(){$(".dull-button-group[id] button").on("click",function(n){var t=$(this),i=t.parent(".dull-button-group");i.data("value",t.data("value")).data("count",parseInt(i.data("count"),10)+1).trigger("change")})});var checkboxInputBinding=new Shiny.InputBinding;$.extend(checkboxInputBinding,{find:function(n){return $(n).find(".dull-checkbox[id]")},getValue:function(n){return $(n).find('input[type="checkbox"]:checked').val()||null},_getLabel:function(n){return $(n).find(".custom-control-description").text()},getState:function(n,t){return{label:this._getLabel(n),value:this.getValue(n)}},subscribe:function(n,t){$(n).on("change.checkboxInputBinding",function(n){t(!0)})},unsubscribe:function(n){$(n).off(".checkboxInputBinding")},receiveMessage:function(n,t){var i=$(n);t.context&&(i.attr("class",function(n,t){return t.replace(/has-(success|warning|danger)/g,"")}),i.addClass(t.context)),i.trigger("change")}}),Shiny.inputBindings.register(checkboxInputBinding,"dull.checkboxInput");var dropdownInputBinding=new Shiny.InputBinding;$.extend(dropdownInputBinding,{find:function(n){return $(n).find(".dull-dropdown[id]")},getValue:function(n){return $(n).data("value")||null},getState:function(n,t){return{value:this.getValue(n)}},subscribe:function(n,t){$(n).on("dull:itemclick.dropdownInputBinding",function(i,u){$(n).data("value",u.value),t()})},unsubscribe:function(n){$(n).off(".dropdownInputBinding")}}),Shiny.inputBindings.register(dropdownInputBinding,"dull.dropdownInput"),$(document).ready(function(){$(".dull-dropdown-item").on("click",function(n){n.preventDefault();var t=$(this);t.trigger("dull:itemclick",{value:t.data("value")||null})})});var formGroupInputBinding=new Shiny.InputBinding;$.extend(formGroupInputBinding,{find:function(n){return $(n).find(".dull-form-group[id]")},getValue:function(n){var t=$(n).children(".dull-input[id]");return t.length?t.map(function(n,t){var i={};return i[t.id]=$(t).val()||null,i}).get().reduce(function(n,t){return Object.assign(n,t)}):null},getState:function(n,t){return{value:this.getValue(n)}},subscribe:function(n,t){$(n).on("dull:formchange.formGroupInputBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".formGroupInputBinding")},receiveMessage:function(n,t){var i=$(n);t.state&&(i.attr("class",function(n,t){return t.replace(/has-(success|warning|danger)/g,"")}),i.addClass(t.state))}}),Shiny.inputBindings.register(formGroupInputBinding,"dull.formGroupInput"),$(document).on("shiny:inputchanged",function(n){var t=$(n.el);if(t.parents(".dull-form[id]").length){var i=t.parents(".dull-form[id]").first();i.find('.dull-submit[type="submit"]').length||(n.preventDefault(),i.trigger("dull:formchange"))}else t.parents(".dull-form-group[id]").length&&(n.preventDefault(),t.parents(".dull-form-group[id]").first().trigger("dull:formchange"))});var formInputBinding=new Shiny.InputBinding;$.extend(formInputBinding,{find:function(n){return $(n).find(".dull-form[id]")},getValue:function(n){var t=$(n).find(".dull-input[id]");return t.length?t.map(function(n,t){var i=$(t).parentsUntil(".dull-form","[id]").map(function(n,t){return t.id}).get();return i.push(t.id),i.reverse(),i.reduce(function(n,t){var i={};return i[t]=n,i},$(t).val()||null)}).get().reduce(function(n,t){var i=Object.keys(t);if(n.hasOwnProperty(i)){var u={};return u[i]=Object.assign(n[i],t[i]),Object.assign(n,u)}return Object.assign(n,t)},{}):null},getState:function(n,t){return{value:this.getValue(n)}},subscribe:function(n,t){$(n).on("dull:formchange.formInputBinding",function(n){t()}),$(n).on("dull:formsubmit.formInputBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".formInputBinding")}}),Shiny.inputBindings.register(formInputBinding,"dull.formInput"),$(document).ready(function(){$(".dull-form[id]").on("submit",function(n){n.preventDefault(),$(this).trigger("dull:formsubmit")})});var inputGroupInputBinding=new Shiny.InputBinding;$.extend(inputGroupInputBinding,{find:function(n){return $(n).find(".dull-input-group[id]")},getValue:function(n){var t=$(n),i=t.find('input[type="text"]').val()||"";return i?{value:t.find(".input-group-addon:first-child").text()+i+t.find(".input-group-addon:last-child").text(),click:t.data("value")||null}:null},getState:function(n){return{value:this.getValue(n)}},subscribe:function(n,t){var i=$(n);i.find("button").length?i.on("dull:click.inputGroupInputBinding",function(n,u){null!==u.value&&i.data("value",u.value),t()}):i.on("dull:textchange.inputGroupInputBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".inputGroupInputBinding")}}),Shiny.inputBindings.register(inputGroupInputBinding,"dull.inputGroupInput"),$(document).ready(function(){$('.dull-input-group[id] input[type="text"]').on("change",function(n){n.preventDefault(),$(this).trigger("dull:textchange")}),$(".dull-input-group[id] button:not(.dropdown-toggle)").on("click",function(n){n.preventDefault();var t=$(this);t.trigger("dull:click",{value:t.data("value")||null})}),$(".dull-input-group[id] .dull-dropdown-item").on("click",function(n){n.preventDefault();var t=$(this);t.trigger("dull:click",{value:t.data("value")||null})})}),$(document).ready(function(){$(".dull-list-group[id] .list-group-item:not(.disabled)").click(function(n){n.preventDefault();var t=$(n.target);t.toggleClass("active"),t.parent().trigger("change")})});var listGroupBinding=new Shiny.InputBinding;$.extend(listGroupBinding,{find:function(n){return $(n).find(".dull-list-group[id]")},getValue:function(n){return $(n).children(".list-group-item.active").map(function(){return $(this).data("value")}).get()},getState:function(n,t){return{value:this.getValue(n)}},subscribe:function(n,t){$(n).on("change.listGroupBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".listGroupBinding")}}),Shiny.inputBindings.register(listGroupBinding,"dull.listGroup");var listGroupItemBinding=new Shiny.InputBinding;$.extend(listGroupItemBinding,{find:function(n){return $(n).find(".dull-list-group-item[id]")},getValue:function(n){return $(n).data("value")},receiveMessage:function(n,t){var i=$(n);t.label&&i.text(t.label),t.value&&i.data("value",t.value),t.context&&(i.attr("class",function(n,t){return t.replace(/list-group-item-(success|info|warning|danger)/,"")}),i.addClass(t.context)),t.active&&i.prop("active",t.active),t.disabled&&i.prop("disabled",t.disabled)}}),Shiny.inputBindings.register(listGroupItemBinding,"dull.listGroupItem");var radiosInputBinding=new Shiny.InputBinding;$.extend(radiosInputBinding,{find:function(n){return $(n).find(".dull-radios[id]")},getValue:function(n){return $(document).find(".dull-radios input:radio:checked").val()},getState:function(n,t){return{value:this.getValue(n)}},subscribe:function(n,t){$(n).on("change.radiosInputBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".radiosInputBinding")}}),Shiny.inputBindings.register(radiosInputBinding,"dull.radiosInput");var textInputBinding=new Shiny.InputBinding;$.extend(textInputBinding,{find:function(n){return $(n).find(".dull-text[id]")},getValue:function(n){return $(n).val()||null},getState:function(n,t){return{value:this.getValue(n)}},getRatePolicy:function(){return{policy:"debounce",delay:250}},subscribe:function(n,t){$(n).on("change.textInputBinding",function(n){t(!0)})},unsubscribe:function(n){$(n).off(".textInputBinding")}}),Shiny.inputBindings.register(textInputBinding,"dull.textInput"),Shiny.addCustomMessageHandler("dull.modal.toggle",function(n){var t=$(n.id);if(0===t.length)return!1;t.modal("toggle")});var alertOutputBinding=new Shiny.OutputBinding;$.extend(alertOutputBinding,{find:function(n){return $(n).find(".dull-alert[id]")},getId:function(n){return n.id},renderValue:function(n,t){var i=$(n);t.show?i.removeClass("invisible").show():null!==t.show&&i.hide()}}),Shiny.outputBindings.register(alertOutputBinding,"dull.alertOutput");var badgeOutputBinding=new Shiny.OutputBinding;$.extend(badgeOutputBinding,{find:function(n){return $(n).find(".dull-badge[id]")},getId:function(n){return n.id},renderValue:function(n,t){var i=$(n);if(i.text(t.value),t.context){var u="badge-"+t.context;i.hasClass(u)||(this._removeContextClasses(n),i.addClass(u))}return!1},_removeContextClasses:function(n){$(n).attr("class",function(n,t){return t.replace(/badge-(default|primary|success|info|warning|danger)/g,"")})}}),Shiny.outputBindings.register(badgeOutputBinding,"dull.badgeOutput");var barOutputBinding=new Shiny.OutputBinding;$.extend(barOutputBinding,{find:function(n){return $(n).find(".dull-bar[id]")},getId:function(n){return n.id},renderValue:function(n,t){var i=$(n);null!==t.value&&i.attr("style","width: "+t.value+"%"),null!==t.label&&i.text(t.label)}}),Shiny.outputBindings.register(barOutputBinding,"dull.barOutput"),$.extend(Shiny.progressHandlers,{dull:function(n){return console.log(n.template),$(n.template).text(n.content).hide().appendTo($(n.id)).fadeIn(300),!1}});