"use strict";var _slicedToArray=function(){function n(n,t){var e=[],i=!0,u=!1,d=void 0;try{for(var a,r=n[Symbol.iterator]();!(i=(a=r.next()).done)&&(e.push(a.value),!t||e.length!==t);i=!0);}catch(n){u=!0,d=n}finally{try{!i&&r.return&&r.return()}finally{if(u)throw d}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();$(function(){$('[data-toggle="tooltip"]').tooltip()}),$(function(){$('[data-toggle="popover"]').popover()}),$(document).on("shiny:connected",function(){$('.dull-submit[data-type="submit"]').attr("type","submit")}),Shiny.addCustomMessageHandler("dull:collapse",function(n){var t=$("#"+n.id);if(0===t.length||!n.action)return!1;t.collapse(n.action)}),function(){this.getType=function(n){if($(n).parents(".dull-form-input[id]").length)return"dull.form.element"}}.call(Shiny.InputBinding.prototype);var alertInputBinding=new Shiny.InputBinding;$.extend(alertInputBinding,{find:function(n){return $(n).find(".dull-alert[id] .close").parent()},getValue:function(n){var t=$(n).data("closed")||null;return console.log(t),t},getState:function(n,t){return{value:this.getValue(n)}},subscribe:function(n,t){$(n).on("closed.bs.alert.alertInputBinding",function(e){$(n).data("closed",!0),t()})},unsubscribe:function(n){$(n).off(".alertInputBinding")}}),Shiny.inputBindings.register(alertInputBinding,"dull.alertInput");var breadcrumbOutputBinding=new Shiny.OutputBinding;$.extend(breadcrumbOutputBinding,{find:function(n){return $(n).find(".buckle-breadcrumb")},getValue:function(n){return $(n).find("li:last").text()}});var buttonInputBinding=new Shiny.InputBinding;$.extend(buttonInputBinding,{find:function(n){return $(n).find(".dull-button-input[id]")},getValue:function(n){var t=$(n);return 0===t.data("clicks")?null:parseInt(t.data("clicks"),10)},getState:function(n,t){return{value:this.getValue(n)}},subscribe:function(n,t){$(n).on("click.buttonInputBinding",function(e){var i=$(n);i.data("clicks",parseInt(i.data("clicks"),10)+1),t()}),$(n).on("change.buttonInputBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".buttonInputBinding")},receiveMessage:function(n,t){var e=$(n);if(t.label&&e.html(t.label),!0===t.reset&&e.data("clicks",0),t.state){var i="valid"===t.state?null:t.state;i&&(i=e.attr("class").search(/btn-outline-/)?"btn-outline-"+t.state:"btn-"+t.state),e.attr("class",function(n,t){return t.replace(/btn-(?:outline-)?(?:primary|secondary|link|success|info|warning|danger)/g,"")}).addClass("valid"===t.state?null:i)}!0===t.disable&&e.prop("disabled",!0),!0===t.enable&&e.prop("disabled",!1),e.trigger("change")}}),Shiny.inputBindings.register(buttonInputBinding,"dull.buttonInput");var checkboxInputBinding=new Shiny.InputBinding;$.extend(checkboxInputBinding,{find:function(n){return $(n).find(".dull-checkbox-input[id]")},getValue:function(n){var t=$(n).find('input[type="checkbox"]:checked:not(:disabled)').data("value");return void 0===t?null:t},_getLabel:function(n){return $(n).find(".custom-control-description").text()},getState:function(n,t){return{label:this._getLabel(n),value:this.getValue(n)}},subscribe:function(n,t){$(n).on("change.checkboxInputBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".checkboxInputBinding")},receiveMessage:function(n,t){var e=$(n);void 0!==t.content&&(e.find("label").remove(),e.html(t.choice)),t.state&&(e.attr("class",function(n,t){return t.replace(/has-(success|warning|danger)/g,"")}),"valid"!==t.state&&e.addClass("has-"+t.state)),!0===t.disable&&(e.find('input[type="checkbox"]').prop("disabled",!0),e.find(".form-gruop").hasClass("disabled")&&e.find(".form-group").addClass("disabled")),!0===t.enable&&(e.find('input[type="checkbox"]').prop("disabled",!1),e.find(".form-group").removeClass("disabled")),e.trigger("change")}}),Shiny.inputBindings.register(checkboxInputBinding,"dull.checkboxInput"),$(document).ready(function(){$(".dull-dropdown-input[id]").on("click",".dropdown-item",function(n){n.preventDefault()}),$(".dull-dropdown-input[id]").on("click",".dropdown-item:not(.disabled)",function(n){$(this).trigger("click:item",{value:$(this).data("value")})})});var dropdownInputBinding=new Shiny.InputBinding;$.extend(dropdownInputBinding,{find:function(n){return $(n).find(".dull-dropdown-input[id]")},getValue:function(n){var t=$(n).data("value");return void 0===t?null:t},getState:function(n,t){return{value:this.getValue(n)}},subscribe:function(n,t){$(n).on("click:item.dropdownInputBinding",function(e,i){$(n).data("value",i.value),t()}),$(n).on("change.dropdownInputBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".dropdownInputBinding")},receiveMessage:function(n,t){var e=$(n);t.disable&&(!0===t.disable?(e.find(".dropdown-toggle").prop("disabled",!0),e.data("value",null)):$.each(t.disable,function(n,t){var i=e.find('.dropdown-item[data-value="'+t+'"]');0===i.length||i.hasClass("disabled")||i.addClass("disabled"),t==e.data("value")&&e.data("value",null)})),t.enable&&(!0===t.enable?(e.find(".dropdown-toggle").prop("disabled",!1),e.find(".dropdown-item").removeClass("disabled")):$.each(t.enable,function(n,t){var i=e.find('.dropdown-item[data-value="'+t+'"]');0!==i.length&&i.removeClass("disabled")})),e.trigger("change")}}),Shiny.inputBindings.register(dropdownInputBinding,"dull.dropdownInput");var formGroupInputBinding=new Shiny.InputBinding;$.extend(formGroupInputBinding,{find:function(n){return $(n).find(".dull-form-group[id]")},getValue:function(n){var t=$(n).children(".dull-input[id]");return t.length?t.map(function(n,t){var e={};return e[t.id]=$(t).val()||null,e}).get().reduce(function(n,t){return Object.assign(n,t)}):null},getState:function(n,t){return{value:this.getValue(n)}},subscribe:function(n,t){$(n).on("dull:formchange.formGroupInputBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".formGroupInputBinding")},receiveMessage:function(n,t){var e=$(n);t.state&&(e.attr("class",function(n,t){return t.replace(/has-(success|warning|danger)/g,"")}),e.addClass(t.state))}}),Shiny.inputBindings.register(formGroupInputBinding,"dull.formGroupInput"),$(document).on("shiny:inputchanged",function(n){var t=$(n.el);if(t.parents(".dull-form[id]").length){var e=t.parents(".dull-form[id]").first();e.find('.dull-submit[type="submit"]').length||(n.preventDefault(),e.trigger("dull:formchange"))}else t.parents(".dull-form-group[id]").length&&(n.preventDefault(),t.parents(".dull-form-group[id]").first().trigger("dull:formchange"))});var formInputBinding=new Shiny.InputBinding;$(document).ready(function(){$(".dull-form-input[id]").each(function(n,t){$(t).find(".dull-input[id]").each(function(n,e){$(e).data("id",e.id).attr("id",t.id+"__"+e.id).data("parent-form",t.id)})})}),$.extend(formInputBinding,{find:function(n){return $(n).find(".dull-form-input[id]")},getValue:function(n){var t=$(n).find(".dull-input[id]").map(function(){var n={},t=Shiny.shinyapp.$inputValues[this.id+":dull.form.element"];return void 0===t?n:(n[$(this).data("id")]=t,n)}).get().reduce(function(n,t){return Object.assign(n,t)});return 0===Object.keys(t).length?null:t},getState:function(n,t){return{value:this.getValue(n)}},subscribe:function(n,t){$(n).on("submit.formInputBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".formInputBinding")}}),Shiny.inputBindings.register(formInputBinding,"dull.formInput");var groupInputBinding=new Shiny.InputBinding;$.extend(groupInputBinding,{find:function(n){return $(n).find(".dull-group-input[id]")},initialize:function(n){var t=$(n);t.data("prefix",t.find(".left-addon").map(function(n,t){return $(t).text()}).get().join("")),t.data("suffix",t.find(".right-addon").map(function(n,t){return $(t).text()}).get().join(""))},getValue:function(n){var t=$(n),e=t.find('input[type="text"]').val();if(""===e)return null;var i=t.find(".left-group .dull-dropdown-input[id]").data("value")||"",u=t.find(".right-group .dull-dropdown-input[id]").data("value")||"";return i+t.data("prefix")+e+t.data("suffix")+u},getState:function(n){return{value:this.getValue(n)}},subscribe:function(n,t){var e=$(n);e.find("button").length?(e.on("click.groupInputBinding",".dull-button-input[id]",function(n){t()}),e.on("click.groupInputBinding",".dull-dropdown-input[id] .dropdown-item",function(n){t()})):e.on("change.groupInputBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".groupInputBinding")}}),Shiny.inputBindings.register(groupInputBinding,"dull.groupInput"),$(document).ready(function(){$(".dull-list-group-input[id]").on("click",".list-group-item:not(.disabled)",function(n){n.preventDefault();var t=$(this);t.toggleClass("active"),t.trigger("change")})});var listGroupInputBinding=new Shiny.InputBinding;$.extend(listGroupInputBinding,{find:function(n){return $(n).find(".dull-list-group-input[id]")},getValue:function(n){var t=$(n).children(".list-group-item.active:not(:disabled)").map(function(n,t){return $(t).data("value")}).get();return void 0===t?null:t},getState:function(n,t){return{value:this.getValue(n)}},subscribe:function(n,t){$(n).on("change.listGroupInputBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".listGroupInputBinding")},receiveMessage:function(n,t){var e=$(n);if(void 0!==t.items&&(e.find(".list-group-item").remove(),0!==e.children().length?e.children().first().before(t.items):e.html(t.items)),void 0!==t.state){var i="valid"===t.state?null:"list-group-item-"+t.state;null!==t.filter?$.each(t.filter,function(n,t){e.find('.list-group-item[data-value="'+t+'"]').attr("class",function(n,t){return t.replace(/list-group-item-(success|info|warning|danger)/g,"")}).addClass(i)}):e.find(".list-group-item").attr("class",function(n,t){return t.replace(/list-group-item-(success|info|warning|danger)/g,"")}).addClass(i)}if(t.disable&&(!0===t.disable?e.find(".list-group-item").each(function(n,t){$(t).prop("disabled",!0)}):$.each(t.disable,function(n,t){e.find('.list-group-item[data-value="'+t+'"]').prop("disabled",!0)})),t.enable&&(!0===t.enable?e.find(".list-group-item").each(function(n,t){$(t).prop("disabled",!1)}):$.each(t.enable,function(n,t){e.find('.list-group-item[data-value="'+t+'"]').prop("disabled",!1)})),t.increment)if(!0===t.increment){var u=e.find(".list-group-item .badge");0!==u.length&&u.each(function(n,t){$(t).text(parseInt($(t).text(),10)+1)})}else $.each(t.increment,function(n,t){var i=e.find('.list-group-item[data-value="'+t+'"] .badge');0!==i.length&&i.text(parseInt(i.text(),10)+1)});e.trigger("change")}}),Shiny.inputBindings.register(listGroupInputBinding,"dull.listGroupInput");var radioInputBinding=new Shiny.InputBinding;$.extend(radioInputBinding,{find:function(n){return $(n).find(".dull-radio-input[id]")},getValue:function(n){var t=$(n).find('input[type="radio"]:checked:not(:disabled)').data("value");return void 0===t?null:t},getState:function(n,t){return{value:this.getValue(n)}},subscribe:function(n,t){$(n).on("change.radioInputBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".radioInputBinding")},receiveMessage:function(n,t){var e=$(n);void 0!==t.choices&&(e.find(".custom-radio").remove(),e.find(".form-control-feedback").before(t.choices)),t.state&&(e.attr("class",function(n,t){return t.replace(/has-(success|warning|danger)/g,"")}),e.find(".form-control-feedback").empty(),"valid"!==t.state&&(e.addClass("has-"+t.state),t.hint&&e.find(".form-control-feedback").html(t.hint))),t.disable&&(!0===t.disable?e.find('input[type="radio"]').each(function(n,t){$(t).prop("disabled",!0)}):$.each(t.disable,function(n,t){e.find('input[type="radio"][data-value="'+t+'"]').prop("disabled",!0)})),t.enable&&(!0===t.enable?e.find('input[type="radio"]').each(function(n,t){$(t).prop("disabled",!1)}):$.each(t.enable,function(n,t){e.find('input[type="radio"][data-value="'+t+'"]').prop("disabled",!1)})),e.trigger("change")}}),Shiny.inputBindings.register(radioInputBinding,"dull.radioInput");var selectInputBinding=new Shiny.InputBinding;$.extend(selectInputBinding,{find:function(n){return $(n).find(".dull-select-input[id]")},getValue:function(n){return $(n).find("option:checked").map(function(n,t){var e=$(t).data("value");return void 0===e?null:e}).get()},getState:function(n,t){return{value:this.getValue(n)}},subscribe:function(n,t){$(n).on("change.selectInputBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".selectInputBinding")}}),Shiny.inputBindings.register(selectInputBinding,"dull.selectInput");var tableInputBinding=new Shiny.InputBinding;$.extend(tableInputBinding,{find:function(n){return $(n).find(".dull-table-thruput[id]")},getType:function(n){return"dull.table.input"},getValue:function(n){var t=$(n).find(".data-row").map(function(n,t){var e={};return $(t).find(".dull-selected-cell").each(function(n,t){e[$(t).data("col")]=$(t).text()}),e}).get();return JSON.stringify(t)},getState:function(n,t){return{value:this.getValue(n)}},subscribe:function(n,t){$(n).on("change.tableInputBinding",function(n){t()})},unsubscribe:function(n){$(n).off(".tableInputBinding")}}),Shiny.inputBindings.register(tableInputBinding,"dull.tableInput"),$(document).ready(function(){$(".dull-table-thruput[id]").on("click",".table-toggle",function(n){var t=$(this),e=t.closest(".dull-table-thruput[id]");e.find(".data-cell").addClass("dull-selected-cell table-"+e.data("context")),t.trigger("change")}),$(".dull-table-thruput[id]").on("click",".row-selector",function(n){var t=$(this).closest("td"),e=t.closest(".dull-table-thruput[id]").data("context");t.siblings(".data-cell").addClass("dull-selected-cell").addClass("table-"+e),t.trigger("change")}),$(".dull-table-thruput[id]").on("click",".row-deselector",function(n){var t=$(this).closest("td"),e=t.closest(".dull-table-thruput[id]").data("context");t.siblings(".data-cell").removeClass("dull-selected-cell").removeClass("table-"+e),t.trigger("change")}),$(".dull-table-thruput[id]").on("click",".column-selector",function(){var n=$(this).closest("td"),t=n.closest(".dull-table-thruput[id]"),e=n.index()+1,i=t.data("context");t.find(".data-cell:nth-child("+e+")").addClass("table-"+i).addClass("dull-selected-cell"),n.trigger("change")}),$(".dull-table-thruput[id]").on("click",".column-deselector",function(){var n=$(this).closest("td"),t=n.closest(".dull-table-thruput[id]"),e=n.index()+1,i=t.data("context");t.find(".data-cell:nth-child("+e+")").removeClass("table-"+i).removeClass("dull-selected-cell"),n.trigger("change")})});var textualInputBinding=new Shiny.InputBinding;$.extend(textualInputBinding,{find:function(n){return $(n).find(".dull-textual-input[id]")},getValue:function(n){var t=$(n).find("input"),e=void 0===t.val()?null:t.val();return null===e?null:"number"===t.attr("type")?parseInt(e,10):e},getState:function(n,t){return{value:this.getValue(n)}},getRatePolicy:function(){return{policy:"debounce",delay:250}},subscribe:function(n,t){$(n).on("change.textualInputBinding",function(n){t(!0)}),$(n).on("input.textualInputBinding",function(n){t(!0)})},unsubscribe:function(n){$(n).off(".textualInputBinding")}}),Shiny.inputBindings.register(textualInputBinding,"dull.textualInput"),Shiny.addCustomMessageHandler("dull.modal.toggle",function(n){var t=$(n.id);if(0===t.length)return!1;t.modal("toggle")});var alertOutputBinding=new Shiny.OutputBinding;$.extend(alertOutputBinding,{find:function(n){return $(n).find(".dull-alert[id]")},getId:function(n){return n.id},renderValue:function(n,t){var e=$(n);t.show?e.removeClass("invisible").show():null!==t.show&&e.hide()}}),Shiny.outputBindings.register(alertOutputBinding,"dull.alertOutput");var badgeOutputBinding=new Shiny.OutputBinding;$.extend(badgeOutputBinding,{find:function(n){return $(n).find(".dull-badge-output[id]")},getId:function(n){return n.id},renderValue:function(n,t){var e=$(n);if(null===t.value&&void 0===t.value||e.text(t.value),t.context){var i="badge-"+t.context;e.hasClass(i)||(e.attr("class",function(n,t){return t.replace(/badge-(default|primary|success|info|warning|danger)/g,"")}),e.addClass(i))}},renderError:function(n,t){},clearError:function(n){}}),Shiny.outputBindings.register(badgeOutputBinding,"dull.badgeOutput");var barOutputBinding=new Shiny.OutputBinding;$.extend(barOutputBinding,{find:function(n){return $(n).find(".dull-bar[id]")},getId:function(n){return n.id},renderValue:function(n,t){var e=$(n);null!==t.value&&e.attr("style","width: "+t.value+"%"),null!==t.label&&e.text(t.label)}}),Shiny.outputBindings.register(barOutputBinding,"dull.barOutput"),$.extend(Shiny.progressHandlers,{dull:function(n){return console.log(n.template),$(n.template).text(n.content).hide().appendTo($(n.id)).fadeIn(300),!1}});var tableOutputBinding=new Shiny.OutputBinding;$.extend(tableOutputBinding,{find:function(n){return $(n).find(".dull-table-thruput[id]")},getId:function(n){return n.id},renderValue:function(n,t){var e=$(n);t.data&&(e.empty(),e.append($("<thead>").append($("<tr>").append($("<th>").text("#"),$.map(Object.keys(t.data[1]),function(n,t){return $("<th>").text(n)}))),$("<tbody>").append($.map(t.data,function(n,t){return $("<tr>").addClass("data-row").append($("<th>").text(t+1).attr("scope","row").addClass("util-cell"),$.map(Object.entries(n),function(n,t){var e=_slicedToArray(n,2),i=e[0],u=e[1];return $("<td>").addClass("data-cell").text(u).data("col",i)}),$("<td>").addClass("selector-cell").append($("<i>").addClass("px-1 fa fa-plus row-selector"),$("<i>").addClass("px-1 fa fa-minus row-deselector")))}),$("<tr>").addClass("selector-row").append($("<th>"),$.map(t.data[1],function(){return $("<td>").addClass("selector-cell").append($("<i>").addClass("px-1 fa fa-plus column-selector"),$("<i>").addClass("px-1 fa fa-minus column-deselector"))}),$("<td>")))))}}),Shiny.outputBindings.register(tableOutputBinding,"dull.tableOutput");var tooltipBinding=new Shiny.OutputBinding;$.extend(tooltipBinding,{find:function(n){return null},getId:function(n){return null},renderValue:function(n,t){var e=$(n);if(t.remove)return e.removeAttr("data-toggle"),e.removeAttr("data-placement"),e.removeAttr("title"),!1;t.show}});