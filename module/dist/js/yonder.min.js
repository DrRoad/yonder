!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";"undefined"!=typeof Shiny&&function(){this.Selector={},this.Events=[],this.find=function(e){return e.querySelectorAll(this.Selector.SELF+"[id]")},this.getId=function(e){return e.id},this.getType=function(e){return this.Type||!1},this.getValue=function(e){if(!this.Selector.hasOwnProperty("SELECTED"))return null;var t=Array.prototype.slice.call(e.querySelectorAll(this.Selector.SELECTED));return t.length?t.map(function(e){var t=e.getAttribute("data-value")||e.value;return void 0===t?null:t}):null},this.getState=function(e,t){return{value:this.getValue(e)}},this.attachHandler=function(t,e,n,i,r,a){var o=this;$(t).on(e+".yonder",n||null,function(e){i&&i(t,e,o),r&&r(a||!1)})},this.subscribe=function(t,n){var i=this,e=$(t),r=!1;e.parent().closest(".yonder-form[id]").length&&(e.on("submission.yonder",function(e){return n()}),r=!0),this.Events.push({type:"change.yonder"}),this.Events.push({type:"update.yonder"}),this.Events.forEach(function(e){i.attachHandler(t,e.type,e.selector,e.callback,r?null:n,e.debounce)})},this.unsubscribe=function(e){$(e).off("yonder")},this._update=function(e,t){console.warn("no _update method")},this._enable=function(e,t){console.warn("no _enable method")},this._disable=function(e,t){console.warn("no _disable method")},this._invalidate=function(e,t){if(this.Selector.hasOwnProperty("VALIDATE")){var n=e.querySelector(this.Selector.VALIDATE);n.classList.remove("is-valid"),n.classList.add("is-invalid");var i=e.querySelector(".invalid-feedback");null!==i&&(i.innerHTML=t.message)}else console.warn("input does not support invalidation")},this._validate=function(e,t){if(this.Selector.hasOwnProperty("VALIDATE")){e.querySelector(this.Selector.VALIDATE).classList.remove("is-invalid");var n=e.querySelector(".invalid-feedback");null!==n&&(n.innerHTML="")}else console.warn("input does not support validation")},this.receiveMessage=function(e,t){if(!t.type||void 0===t.data)return!1;switch(t.type){case"update":this._update(e,t.data);break;case"change":this._select(e,t.data);break;case"enable":this._enable(e,t.data);break;case"disable":this._disable(e,t.data);break;case"invalidate":this._invalidate(e,t.data);break;case"validate":this._validate(e,t.data)}return"change"===t.type&&!1===t.data.propagate||$(e).trigger(t.type+".yonder"),!1}}.call(Shiny.InputBinding.prototype);var e=new Shiny.InputBinding;$.extend(e,{Selector:{SELF:".yonder-button-group"},Events:[{type:"click",selector:"button",callback:function(e,t,n){n._VALUES[e.id]=t.currentTarget.value}}],_VALUES:{},getType:function(e){return"yonder.buttonGroup"},initialize:function(e){this._VALUES[e.id]=null},getValue:function(e){return{force:Date.now(),value:this._VALUES[e.id]}},_update:function(i,r){var a=i.querySelector("button").cloneNode();a.removeAttribute("disabled"),i.innerHTML="",r.choices.forEach(function(e,t){var n=a.cloneNode();n.innerHTML=e,n.value=r.values[t],i.appendChild(n)})},_enable:function(e,t){var n=t.values;e.querySelectorAll("button").forEach(function(e){(!n.length||-1<n.indexOf(e.value))!==t.invert&&e.removeAttribute("disabled")})},_disable:function(e,n){var i=n.values;e.querySelectorAll("button").forEach(function(e){var t=!i.length||-1<i.indexOf(e.value);n.reset&&e.removeAttribute("disabled"),t!==n.invert&&e.setAttribute("disabled","")})}}),Shiny.inputBindings.register(e,"yonder.buttonGroupInput");var t=new Shiny.InputBinding;$.extend(t,{Selector:{SELF:".yonder-button"},Events:[{type:"click",callback:function(e){return e.value=+e.value+1}}],initialize:function(e){e.value=0},getValue:function(e){return 0<+e.value?+e.value:null},_update:function(e,t){e.innerHTML=t.choices[0],t.choices!==t.values&&(e.value=parseInt(t.values[0],10)||0)},_enable:function(e,t){t.invert||(e.classList.remove("disabled"),e.removeAttribute("disabled"))},_disable:function(e,t){t.invert||(e.classList.add("disabled"),e.setAttribute("disabled",""))}}),Shiny.inputBindings.register(t,"yonder.buttonInput");var n=new Shiny.InputBinding;$.extend(n,{Selector:{SELF:".yonder-checkbar",SELECTED:"input:checked"},Events:[{type:"change",selector:".btn"}],_update:function(i,r){var a=i.querySelector(".btn").cloneNode(!0);a.classList.remove("active"),a.classList.remove("disabled"),a.children[0].removeAttribute("disabled");var e=a.children[0].cloneNode();a.innerHTML="",a.appendChild(e),i.innerHTML="",r.choices.forEach(function(e,t){var n=a.cloneNode(!0);n.insertAdjacentHTML("beforeend",e),n.children[0].value=r.values[t],-1<r.selected.indexOf(r.values[t])&&(n.classList.add("active"),n.children[0].checked=!0),i.appendChild(n)})},_select:function(e,n){e.querySelectorAll(".btn").forEach(function(e){var t=e.children[0].value;n.reset&&(e.classList.remove("active"),e.children[0].checked=!1),(n.fixed?-1<n.pattern.indexOf(t):RegExp(n.pattern,"i").test(t))!==n.invert&&(e.classList.add("active"),e.children[0].checked=!0)})},_enable:function(e,t){var n=t.values;e.querySelectorAll(".btn").forEach(function(e){(!n.length||-1<n.indexOf(e.children[0].value))!==t.invert&&(e.classList.remove("disabled"),e.children[0].removeAttribute("disabled"))})},_disable:function(e,n){var i=n.values;e.querySelectorAll(".btn").forEach(function(e){var t=!i.length||-1<i.indexOf(e.children[0].value);n.reset&&(e.classList.remove("disabled"),e.children[0].removeAttribute("disabled")),t!==n.invert&&(e.classList.add("disabled"),e.children[0].setAttribute("disabled",""))})}}),Shiny.inputBindings.register(n,"yonder.checkbarInput");var i=new Shiny.InputBinding;$.extend(i,{Selector:{SELF:".yonder-checkbox",SELECTED:".custom-control-input:checked:not(:disabled)",VALIDATE:".custom-control-input"},Events:[{type:"change"}],_update:function(i,r){var a=i.querySelector(".custom-checkbox").cloneNode(!0);a.children[0].checked=!1,i.innerHTML="",r.choices.forEach(function(e,t){var n=a.cloneNode(!0);n.children[0].value=r.values[t],n.children[1].innerHTML=e,-1<r.selected.indexOf(r.values[t])&&(n.children[0].checked=!0),i.appendChild(n)})},_select:function(e,n){e.querySelectorAll(".custom-checkbox").forEach(function(e){var t=e.children[0].value;n.reset&&(e.children[0].checked=!1),(n.fixed?-1<n.pattern.indexOf(t):RegExp(n.pattern,"i").test(t))!==n.invert&&(e.children[0].checked=!0)})},_enable:function(e,t){e.querySelectorAll("input").forEach(function(e){(!t.values.length&&-1<t.values.indexOf(e.value))!==t.invert&&e.removeAttribute("disabled")})},_disable:function(e,n){e.querySelectorAll("input").forEach(function(e){var t=!n.values.length&&-1<n.values.indexOf(e.value);n.reset&&e.removeAttribute("disabled"),t!==n.invert&&e.setAttribute("disabled","")})}}),Shiny.inputBindings.register(i,"yonder.checkboxInput");var r=new Shiny.InputBinding;$.extend(r,{Selector:{SELF:".yonder-chip",SELECTED:".active",TOGGLE:"input[data-toggle='dropdown']"},Events:[{type:"input",callback:function(e,t,n){var i=e.querySelector(n.Selector.TOGGLE).value;n.filterItems(e,i),0===n.visibleItems(e)?$(e.querySelector(n.Selector.TOGGLE)).dropdown("hide"):$(e.querySelector(n.Selector.TOGGLE)).dropdown("show")}},{type:"input change",callback:function(e,t,n){$(e.querySelector(n.Selector.TOGGLE)).dropdown("update")}},{type:"hide.bs.dropdown",callback:function(e,t,n){null===e.querySelector("input:focus")&&(e.querySelector("input").value="",n.filterItems(e,""))}},{type:"click",selector:".dropdown-item",callback:function(e,t,n){t.stopPropagation(),n.addChip(e,t.currentTarget.value),e.querySelector(n.Selector.TOGGLE).focus()}},{type:"click",selector:".chip",callback:function(e,t,n){n.removeChip(e,t.currentTarget.value)}}],enableToggle:function(e){var t=e.querySelector("input");t.removeAttribute("disabled"),t.classList.remove("disabled")},disableToggle:function(e){var t=e.querySelector("input");t.setAttribute("disabled",""),t.classList.add("disabled")},filterItems:function(e,t){e.querySelectorAll(".dropdown-item").forEach(function(e){-1!==e.innerText.toLowerCase().indexOf(t)?e.classList.remove("filtered"):e.classList.add("filtered")})},visibleItems:function(e){return e.querySelectorAll(":not(.selected), :not(.filtered)").length},selectedItems:function(e){return e.querySelectorAll(".selected").length},getItem:function(e,t){return Array.prototype.filter.call(e.querySelectorAll(".dropdown-item"),function(e){return e.value===t})},addChip:function(e,t){this.getItem(e,t).forEach(function(e){return e.classList.add("selected")}),this.getChip(e,t).forEach(function(e){return e.classList.add("active")}),0===this.visibleItems(e)&&$(e.querySelector(this.Selector.TOGGLE)).dropdown("hide");var n=+e.getAttribute("data-max");-1===n||this.selectedItems(e)<n?$(e.querySelector(this.Selector.TOGGLE)).dropdown("update"):($(e.querySelector(this.Selector.TOGGLE)).dropdown("hide"),this.disableToggle(e))},removeChip:function(e,t){var n=+e.getAttribute("data-max");this.getChip(e,t).forEach(function(e){return e.classList.remove("active")}),this.getItem(e,t).forEach(function(e){return e.classList.remove("selected")}),(-1===n||this.selectedItems(e)<n)&&this.enableToggle(e)},getChip:function(e,t){return Array.prototype.filter.call(e.querySelectorAll(".chip"),function(e){return e.value===t})},initialize:function(e){var t=+e.getAttribute("data-max");-1!==t&&this.selectedItems(e)>=t&&this.disableToggle(e)},_update:function(e,r){var a=e.querySelector(".dropdown-item").cloneNode();a.value="",a.innerText="",a.classList.remove("selected"),a.classList.remove("filtered");var o=e.querySelector(".chip").cloneNode(!0);o.value="",o.children[0].innerHTML="",o.classList.remove("active");var l=e.querySelector(".dropdown-menu"),c=e.querySelector(".chips");l.innerHTML="",c.innerHTML="",r.choices.forEach(function(e,t){var n=a.cloneNode();n.value=r.values[t],n.innerHTML=e;var i=o.cloneNode(!0);i.value=r.values[t],i.children[0].innerHTML=e,-1<r.selected.indexOf(r.values[t])&&(n.classList.add("selected"),i.classList.add("active")),l.appendChild(n),c.appendChild(i)})},_select:function(n,i){var r=this;n.querySelectorAll(".chip").forEach(function(e){var t=e.value;i.reset&&r.removeChip(n,t),(i.fixed?-1<i.pattern.indexOf(t):RegExp(i.pattern,"i").test(t))!=i.invert&&r.addChip(n,t)})}}),Shiny.inputBindings.register(r,"yonder.chipInput");var a=new Shiny.InputBinding;document.addEventListener("DOMContentLoaded",function(){bsCustomFileInput.init(".yonder-file[id] input[type='file']")}),$.extend(a,{Selector:{SELF:".yonder-file",VALIDATE:"input[type='file']"},Events:[{type:"change",callback:function(e,t,n){null===e.querySelector("button")&&n._doUpload(e)}},{type:"click",selector:"button",callback:function(e,t,n){return n._doUpload(e)}},{type:"dragover",callback:function(e,t){t.stopPropagation(),t.preventDefault()}},{type:"dragcenter",callback:function(e,t){t.stopPropagation(),t.preventDefault()}},{type:"drop",callback:function(e,t,n){t.stopPropagation(),t.preventDefault(),n._doUpload(e,t.originalEvent.dataTransfer.files)}}],getValue:function(e){return null},_value:function(){return null},_choice:function(){return null},_select:function(){return null},_clear:function(){return null},_enable:function(e,t){e.querySelector("input[type='file']").removeAttribute("disabled")},_disable:function(e,t){e.querySelector("input[type='file']").setAttribute("disabled","")},_sendFile:function(e,t,n,i,r){var a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Content-Type","application/octet-stream"),a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&200==a.status&&i&&Shiny.shinyapp.makeRequest("uploadEnd",[t,r.id],function(e){r.querySelector("input[type='file']").value=""},function(e){console.error("uploadEnd request failed for "+r.id+": "+e)})},a.send(n)},_doUpload:function(r,a){var o=this,e=r.querySelector("input[type='file']");if(void 0===a&&(a=e.files),a){var t=(a=e.hasAttribute("multiple")?Array.prototype.slice.call(a):Array.prototype.slice.call(a,0,1)).map(function(e){return{name:e.name,size:e.size,type:e.type}});Shiny.shinyapp.makeRequest("uploadInit",[t],function(e){for(var t=e.jobId,n=e.uploadUrl,i=0;i<a.length;i++)o._sendFile(n,t,a[i],i===a.length-1,r)},function(e){console.error("uploadInit request failed for "+r.id+": "+e)})}}}),Shiny.inputBindings.register(a,"yonder.fileInput");var o=new Shiny.InputBinding;$.extend(o,{Events:[{type:"click",selector:".yonder-submit",callback:function(e,t,n){n._VALUES[e.id]=t.currentTarget.value,$(e.querySelectorAll(".shiny-bound-input")).trigger("submission.yonder")}}],Type:"yonder.form",_VALUES:{},find:function(e){return Array.prototype.slice.call(e.querySelectorAll(".yonder-form[id]")).filter(function(e){return null!==e.querySelector(".yonder-submit")})},initialize:function(e){this._VALUES[e.id]=null},getValue:function(e){return{force:Date.now(),value:this._VALUES[e.id]}},_value:function(){return null},_choice:function(){return null},_select:function(){return null},_clear:function(){return null},_enable:function(){return null},_disable:function(){return null}}),Shiny.inputBindings.register(o,"yonder.formInput");var l=new Shiny.InputBinding;$.extend(l,{Selector:{SELF:".yonder-group[id]",SELECTED:".input-group-prepend .input-group-text, input, .input-group-append .input-group-text",VALIDATE:"input"},Events:[{type:"input",debounce:!0},{type:"change",debounce:!0}],Type:"yonder.group",getValue:function(e){return Array.prototype.slice.call(e.querySelectorAll(this.Selector.SELECTED)).map(function(e){return/^(DIV|SPAN)$/.test(e.tagName)?e.innerText:e.value||null}).filter(function(e){return null!==e})},_update:function(e,t){e.querySelector("input").value=t.values[0]},_enable:function(e,t){e.querySelector("input").removeAttribute("disabled")},_disable:function(e,t){e.querySelector("input").setAttribute("disabled","")}}),Shiny.inputBindings.register(l,"yonder.groupInput");var c=new Shiny.InputBinding;$.extend(c,{Selector:{SELF:".yonder-link[id]"},Events:[{type:"click",callback:function(e){return e.value=+e.value+1}}],initialize:function(e){e.value=0},getValue:function(e){return 0<+e.value?+e.value:null},_update:function(e,t){e.value=t.values[0],e.innerText=t.choices[0]},_disable:function(e,t){e.classList.add("disabled"),e.setAttribute("disabled","")},_enable:function(e,t){e.classList.remove("disabled"),e.removeAttribute("disabled")}}),Shiny.inputBindings.register(c,"yonder.linkInput");var d=new Shiny.InputBinding;$.extend(d,{Selector:{SELF:".yonder-list-group",SELECTED:".active:not(.disabled)"},Events:[{type:"click",selector:".list-group-item-action:not(.active):not(.disabled)",callback:function(e,t,n){e.querySelectorAll(".active").forEach(function(e){return e.classList.remove("active")}),t.currentTarget.classList.add("active")}},{type:"click",selector:".active:not(.disabled)",callback:function(e,t,n){t.currentTarget.classList.remove("active")}}],_update:function(i,r){var a=i.querySelector(".list-group-item").cloneNode();a.classList.remove("active"),a.classList.remove("disabled"),i.innerHTML="",r.choices.forEach(function(e,t){var n=a.cloneNode();n.innerHTML=e,n.value=r.values[t],-1<r.selected.indexOf(r.values[t])&&n.classList.add("active"),i.appendChild(n)})},_select:function(e,n){e.querySelectorAll(".list-group-item").forEach(function(e){var t=e.value;n.reset&&e.classList.remove("active"),(n.fixed?-1<n.pattern.indexOf(t):RegExp(n.pattern,"i").test(t))!==n.invert&&e.classList.add("active")})},_enable:function(e,t){var n=t.values;e.querySelectorAll(".list-group-item").forEach(function(e){(!n.length||-1<n.indexOf(e.value))!==t.invert&&e.classList.remove("disabled")})},_disable:function(e,n){var i=n.values;e.querySelectorAll(".list-group-item").forEach(function(e){var t=!i.length||-1<i.indexOf(e.value);n.reset&&e.classList.remove("disabled"),t!==n.invert&&e.classList.add("disabled")})}}),Shiny.inputBindings.register(d,"yonder.listGroupInput");var u=new Shiny.InputBinding;$.extend(u,{Selector:{SELF:".yonder-menu",SELECTED:".dropdown-item.active"},Events:[{type:"click",selector:".dropdown-item:not(.disabled)",callback:function(e,t){var n=e.querySelector(".dropdown-item.active");null!==n&&n.classList.remove("active"),t.currentTarget.classList.add("active")}},{type:"nav.reset",callback:function(e){var t=e.querySelector(".dropdown-item.active");null!==t&&t.classList.remove("active")}}],_update:function(i,r){var a=i.querySelector(".dropdown-item").cloneNode();a.removeClass("disabled"),a.removeClass("active"),i.innerHTML="",r.choices.forEach(function(e,t){var n=a.cloneNode();n.innerHTML=e,n.value=r.values[t],-1<r.selected.indexOf(r.values[t])&&n.classList.add("active"),i.appendChild(n)})},_select:function(e,n){e.querySelectorAll(".dropdown-item").forEach(function(e){var t=e.value;n.reset&&e.classList.remove("active"),(n.fixed?-1<n.pattern.indexOf(t):RegExp(n.pattern,"i").test(t))!==n.inverted&&e.classList.add("active")})},_enable:function(e,t){e.querySelectorAll(".dropdown-item").forEach(function(e){(!t.values.length||-1<t.values.indexOf(e.value))!==t.invert&&e.classList.remove("disabled")})},_disable:function(e,n){e.querySelectorAll(".dropdown-item").forEach(function(e){var t=!n.values.length||-1<n.values.indexOf(e.value);n.reset&&e.classList.remove("disabled"),t!==n.invert&&e.classList.add("disabled")})}}),Shiny.inputBindings.register(u,"yonder.menuInput");var s=new Shiny.InputBinding;$.extend(s,{Selector:{SELF:".yonder-nav",SELECTED:".nav-link.active:not(.disabled)"},Events:[{type:"click",selector:".nav-link:not(.dropdown-toggle):not(.disabled)",callback:function(e,t){var n=e.querySelector(".dropdown-item.active");null!==n&&$(n.parentNode.parentNode).trigger("nav.reset"),e.querySelectorAll(".nav-link.active").forEach(function(e){e.classList.remove("active")}),t.currentTarget.classList.add("active")}},{type:"click",selector:".dropdown-item:not(.disabled)",callback:function(e,t){e.querySelectorAll(".active").forEach(function(e){e.classList.remove("active")}),t.currentTarget.parentNode.parentNode.children[0].classList.add("active"),t.currentTarget.classList.add("active")}}],_update:function(i,r){var a=i.querySelector(".nav-item").cloneNode(!0);a.children[0].classList.remove("active"),a.children[0].classList.remove("disabled"),i.innerHTML="",r.choices.forEach(function(e,t){var n=a.cloneNode(!0);n.children[0].innerHTML=e,n.children[0].value=r.values[t],-1<r.selected.indexOf(r.values[t])&&n.children[0].classList.add("active"),i.appendChild(n)})},_select:function(e,n){e.querySelectorAll(".nav-link").forEach(function(e){var t=e.value;n.reset&&e.classList.remove("active"),(n.fixed?-1<n.pattern.indexOf(t):RegExp(n.pattern,"i").test(t))!==n.invert&&e.classList.add("active")})},_disable:function(e,n){e.querySelectorAll(".nav-link").forEach(function(e){var t=!n.values.length||-1<n.values.indexOf(e.value);n.reset&&e.classList.remove("disabled"),t!==n.invert&&e.classList.add("disabled")})},_enable:function(e,t){e.querySelectorAll(".nav-link").forEach(function(e){(!t.values.length||-1<t.values.indexOf(e.value))!==t.invert&&e.classList.remove("disabled")})}}),Shiny.inputBindings.register(s,"yonder.navInput"),Shiny.addCustomMessageHandler("yonder:pane",function(e){if(void 0!==e.type&&void 0!==e.data&&void 0!==e.data.target){var t=document.getElementById(e.data.target);null!==t&&("show"===e.type?function(n){if(null!==n&&n.parentElement.classList.contains("tab-content")){var i=n.parentElement.querySelector(".active");bootstrap.Tab.prototype._activate(n,n.parentElement,function(){var e=$.Event("hidden.bs.tab",{relatedTarget:n}),t=$.Event("shown.bs.tab",{relatedTarget:i});$(i).trigger(e),$(n).trigger(t)})}}(t):"hide"===e.type&&function(t){if(null!==t&&t.parentElement.classList.contains("tab-content")&&t.classList.contains("active")){var e=document.createElement("div");bootstrap.Tab.prototype._activate(e,t.parentElement,function(){var e=$.Event("hidden.bs.tab",{relatedTarget:t});$(t).trigger(e)})}}(t))}});var v=new Shiny.InputBinding;function p(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}$.extend(v,{Selector:{SELF:".yonder-radio[id]",SELECTED:".custom-control-input:checked:not(:disabled)",VALIDATE:".custom-control-input"},Events:[{type:"change"}],_update:function(r,a){var o=r.querySelector(".custom-radio").cloneNode(!0);o.children[0].removeAttribute("id"),o.children[0].removeAttribute("checked"),o.children[1].removeAttribute("for"),r.innerHTML="",a.choices.forEach(function(e,t){var n="radio-"+p(100,1e3)+"-"+p(100,1e3),i=o.cloneNode(!0);i.children[1].innerHTML=e,i.children[1].setAttribute("for",n),i.children[0].value=a.values[t],i.children[0].setAttribute("id",n),-1<a.selected.indexOf(a.values[t])&&i.children[0].setAttribute("checked",""),r.appendChild(i)})},_select:function(e,n){e.querySelectorAll(".custom-control-input").forEach(function(e){var t=e.value;n.reset&&e.removeAttribute("checked"),(n.fixed?-1<n.pattern.indexOf(t):RegExp(n.pattern,"i").test(t))!==n.invert&&e.setAttribute("checked","")})},_enable:function(e,t){e.querySelectorAll(".custom-control-input").forEach(function(e){(!t.values.length||-1<t.values.indexOf(e.value))!==t.invert&&e.removeAttribute("disabled")})},_disable:function(e,n){e.querySelectorAll(".custom-control-input").forEach(function(e){var t=!n.values.length||-1<n.values.indexOf(e.value);n.reset&&e.removeAttribute("disabled"),t!==n.invert&&e.setAttribute("disabled","")})}}),Shiny.inputBindings.register(v,"yonder.radioInput");var f=new Shiny.InputBinding;$.extend(f,{Selector:{SELF:".yonder-radiobar[id]",SELECTED:"input:checked:not(:disabled)"},Events:[{type:"click"},{type:"change"}],_update:function(i,r){var a=i.querySelector(".btn").cloneNode(!0);a.classList.remove("active"),a.classList.remove("disabled");var e=a.children[0].cloneNode();e.removeAttribute("checked"),a.innerHTML="",a.appendNode(e),i.innerHTML="",r.choices.forEach(function(e,t){var n=a.cloneNode(!0);n.insertAdjacentHTML("beforeend",e),n.children[0].value=r.values[t],-1<r.selected.indexOf(r.values[t])&&(n.classList.add("active"),n.children[0].setAttribute("checked","")),i.appendChild(n)})},_select:function(e,n){e.querySelectorAll(".btn").forEach(function(e){var t=e.children[0].value;n.reset&&(e.classList.remove("active"),e.children[0].removeAttribute("checked")),(n.fixed?-1<n.pattern.indexOf(t):RegExp(n.pattern,"i").test(t))!==n.invert&&(e.classList.add("active"),e.children[0].setAttribute("checked",""))})},_enable:function(e,t){var n=t.values;e.querySelectorAll("input").forEach(function(e){(!n.length||-1<n.indexOf(e.value))!==t.invert&&(e.parentNode.classList.remove("disabled"),e.removeAttribute("disabled"))})},_disable:function(e,n){var i=n.values;e.querySelectorAll("input").forEach(function(e){var t=!i.length||-1<i.indexOf(e.value);n.reset&&(e.parentNode.classList.remove("disabled"),e.removeAttribute("disabled")),t!==n.invert&&(e.parentNode.classList.add("disabled"),e.setAttribute("disabled",""))})}}),Shiny.inputBindings.register(f,"yonder.radiobarInput");var h=new Shiny.InputBinding;$.extend(h,{Selector:{SELF:".yonder-range[id]"},Events:[{type:"change"}],initialize:function(e){$(e.querySelector("input")).ionRangeSlider()},getId:function(e){return e.id},getValue:function(e){var t=$("input[type='text']",e),n=t.data("ionRangeSlider");return"double"===t.data("type")?[n.result.from,n.result.to]:"single"===t.data("type")?null!==n.result.from_value?n.result.from_value.replace("&#44;",","):n.result.from:null},getState:function(e,t){return{value:this.getValue(e)}},_update:function(e,t){$(e.querySelector(".irs-hidden-input")).data("ionRangeSlider").update({values:t.values})},_select:function(e,t){$(e.querySelector(".irs-hidden-input")).data("ionRangeSlider")},dispose:function(e){$(e.querySelector(".irs-hidden-input")).data("ionRangeSlider").destroy()}}),Shiny.inputBindings.register(h,"yonder.rangeInput");var y=new Shiny.InputBinding;$.extend(y,{Selector:{SELF:".yonder-select",SELECTED:"option:checked:not(:disabled)",VALIDATE:"select"},Events:[{type:"change"}],_update:function(e,i){var r=e.children[0],a=e.querySelector("option").cloneNode();a.removeAttribute("selected"),a.removeAttribute("disabled"),r.innerHTML="",i.choices.forEach(function(e,t){var n=a.cloneNode();n.innerText=e,n.value=i.values[t],-1<i.selected.indexOf(i.values[t])&&(n.selected=!0),r.appendChild(n)})},_select:function(n,i){n.querySelectorAll("option").forEach(function(e){var t=e.value;!0===i.reset&&e.removeAttribute("selected"),(i.fixed?-1<i.pattern.indexOf(t):RegExp(i.pattern,"i").test(t))!==i.invert&&(n.querySelector("select").value=t)})},_enable:function(e,t){e.querySelectorAll("option").forEach(function(e){(!t.values.length||t.values.indexOf(e.value))!==t.invert&&e.removeAttribute("disabled")})},_disable:function(e,n){e.querySelectorAll("option").forEach(function(e){var t=!n.values.length||n.values.indexOf(e.value);n.reset&&e.removeAttribute("disabled"),t!==n.invert&&e.setAttribute("disabled","")})}}),Shiny.inputBindings.register(y,"yonder.selectInput");var b=new Shiny.InputBinding;$.extend(b,{Selector:{SELF:".yonder-textual",VALIDATE:"input"},Events:[{type:"change",debounce:!0},{type:"input",debounce:!0}],getValue:function(e){var t=e.children[0];return"number"===t.type?parseInt(t.value,10):t.value},getRatePolicy:function(){return{policy:"debounce",delay:250}},_update:function(e,t){e.children[0].value=t.values[0]},_disable:function(e,t){e.children[0].setAttribute("disabled","")},_enable:function(e,t){e.children[0].removeAttribute("disabled")}}),Shiny.inputBindings.register(b,"yonder.textualInput");var g=new Shiny.OutputBinding;$.extend(g,{find:function(e){return $(e).find(".yonder-badge[id]")},getId:function(e){return e.id},renderValue:function(e,t){void 0!==t.data&&(e.innerHTML=t.data)},renderError:function(e,t){},clearError:function(e){}}),Shiny.outputBindings.register(g,"yonder.badgeOutput"),$.extend(Shiny.progressHandlers,{"yonder-progress":function(e){if(!e.type||!e.data.outlet)return!1;var t=$("#"+e.data.outlet);if("show"!==e.type)return!1;var n=$(e.data.content);return n[0].id&&t.find("#"+n[0].id).length?t.find("#"+n[0].id).replaceWith(n):t.append(n),!0}});var S=new Shiny.InputBinding;$.extend(S,{Selector:{SELF:".yonder-table[id]"},Type:"yonder.table",Events:[{type:"chabudai:select"},{type:"chabudai:edited"}],getValue:function(e){return JSON.stringify($(e).table("selected"))},receiveMessage:function(e,t){}});var m=new Shiny.OutputBinding;$.extend(m,{find:function(e){return $(e).find(".yonder-table[id]")},renderValue:function(e,t){t.data&&$(e).table({data:t.data})}}),Shiny.inputBindings.register(S,"yonder.tableInput"),Shiny.outputBindings.register(m,"yonder.tableOutput"),Shiny.addCustomMessageHandler("yonder:collapse",function(e){if(void 0===e.type||void 0===e.data||void 0===e.data.target)return!1;if("show"!==e.type&&"hide"!==e.type&&"toggle"!==e.type)return!1;var t=document.getElementById(e.data.target);return null!==t&&($(t).collapse(e.type),!0)}),Shiny.addCustomMessageHandler("yonder:element",function(e){var t,n;e.type&&("render"===e.type?function(e){e.dependencies&&Shiny.renderDependencies(e.dependencies);var t=document.getElementById(e.target);null!==t&&(Shiny.unbindAll(t),t.innerHTML=e.content,Shiny.initializeInputs(t),Shiny.bindAll(t))}(e.data):"remove"===e.type?(t=e.data,null!==(n=document.getElementById(t.target))&&(Shiny.unbindAll(n),n.innerHTML="")):console.warn("no element "+e.type+" method"))}),$(function(){$(document).on("hidden.bs.modal",".modal",function(e){Shiny.unbindAll(e.currentTarget)})}),Shiny.addCustomMessageHandler("yonder:modal",function(e){if(void 0===e.type)return!1;var n,i,t;"hide"===e.type?(t=e.data,$(document.getElementById(t.id)).modal("hide")):"show"===e.type?(n=e.data,i=document.getElementById(n.id),n.exprs&&Object.keys(n.exprs).forEach(function(e){var t=i.querySelector("span[data-target='"+n.id+"__"+e+"']");t&&(t.innerHTML=n.exprs[e])}),$(i).modal("show")):"register"===e.type?function(n){var e=document.createElement("div");e.classList.add("modal"),e.classList.add("fade"),e.setAttribute("tabindex",-1),e.setAttribute("role","dialog"),e.setAttribute("id",n.id),void 0!==n.dependencies&&Shiny.renderDependencies(n.dependencies),document.body.appendChild(e);var t=n.content.replace(/[{]\s*([a-z0-9_.]+)\s*[}]/g,function(e,t){return"<span data-target='"+n.id+"__"+t+"'></span>"});e.insertAdjacentHTML("afterbegin",t),Shiny.initializeInputs(e),Shiny.bindAll(e)}(e.data):console.warn("no modal "+e.type+" method")}),$(function(){document.body.insertAdjacentHTML("beforeend","<div class='toasts'></div>"),$(".toasts").on("hidden.bs.toast",".toast",function(e){if(e.currentTarget.hasAttribute("data-action")){var t=e.currentTarget.getAttribute("data-action");Shiny.onInputChange(t,!0),setTimeout(function(){return Shiny.onInputChange(t,null)},100)}e.delegateTarget.removeChild(e.currentTarget)})}),Shiny.addCustomMessageHandler("yonder:toast",function(e){var t,n;e.type&&("show"===e.type?(n=e.data,document.querySelector(".toasts").insertAdjacentHTML("beforeend",n.content),$(".toasts > .toast:last-child").toast("show")):"close"===e.type?(e.data,(t=document.querySelectorAll(".toasts .toast")).length&&$(t).toast("hide")):console.warn("no toast "+e.type+" method"))}),$(function(){$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover(),$(document).on("shiny:connected",function(){$('.yonder-submit[data-type="submit"]').attr("type","submit")}),Shiny.addCustomMessageHandler("yonder:popover",function(e){if(void 0!==e.data.target){if("show"==e.type){var t=e.data,n="#"+t.target;return $(n).popover({title:function(){},content:function(){},template:t.content,placement:t.placement,trigger:"manual"}),t.duration&&setTimeout(function(){return $(n).popover("hide")},t.duration),void $(n).popover("show")}"close"!=e.type||$("#"+e.data.id).popover("hide")}}),Shiny.addCustomMessageHandler("yonder:download",function(t){if(!(t.filename&&t.token&&t.key))throw"invalid download event";var e="/session/"+t.token+"/download/"+t.key,n=window.navigator.userAgent;if(!0===/MSIE/.test(n)){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){return saveAs(i.response,t.filename)},i.send()}else fetch(e).then(function(e){return e.blob()}).then(function(e){saveAs(e,t.filename)})})})});