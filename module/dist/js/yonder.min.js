!function(){"use strict";void 0!==Shiny&&function(){this.find=function(e){return e.querySelectorAll(`${this.Selector.SELF}[id]`)},this.getId=function(e){return e.id},this.getType=function(e){return!!this.Type&&this.Type},this.getValue=function(e){if(!this.hasSelector("SELECTED"))return null;let t=$(e).find(`${this.Selector.SELECTED}`).map((e,t)=>{let n=$(t);return n.is("[data-value]")?n.data("value"):n.is("input")?n.val():n.text()}).get();return void 0===t?null:t},this.subscribe=function(e,t){if(this.isFormElement(e))$(e).closest(".yonder-form[id]").on("submit",e=>t());else if(void 0!==this.Events&&this.Events.length)for(const n of this.Events||[])$(e).on(`${n.type}.yonder`,n.selector||null,i=>{n.callback&&!1===n.callback(e,n.selector&&i.target||void 0,this)||t(n.debounce||!1)})},this.unsubscribe=function(e){$(e).off("yonder")},this.updateChoices=function(e,t){if(!this.hasSelector("VALUE")||!this.hasSelector("LABEL"))return;if(this.Selector.VALUE===this.Selector.SELF){let n=t[$(e).data("value")];return void(void 0!==n&&$(e).html(n))}let n=$(e).find(`${this.Selector.VALUE}`),i=$(e).find(`${this.Selector.LABEL}`);n.length==i.length?n.each((e,n)=>{let r=$(n),a=$(i.get(e)),o=t[r.data("value")];void 0!==o&&a.html(o)}):console.error("updateChoices: mismatched number of inputs and labels")},this.updateValues=function(e,t){if(this.hasSelector("VALUE")){if("string"==typeof t||Array.isArray(t)){let n=$(e).find(`${this.Selector.VALUE}`),i="string"==typeof t?[t]:t;return n.has(":not(input[type='text'])").length?void console.error("updateValues: expecting all inputs to be text if new values are unnamed"):n.length!=i.length?void console.error("updateValues: mismatched number of inputs and values"):void n.each((e,t)=>{let n=$(t);n.val(i[e]),n.trigger("change")})}if(this.Selector.VALUE!==this.Selector.SELF)$(e).find(`${this.Selector.VALUE}`).each((e,n)=>{let i=$(n),r=t[i.data("value")];void 0!==r&&i.data("value",r)});else{let e=t[$input.data("value")];void 0!==e&&$input.data("value",e)}}},this.markValid=function(e,t){if(!this.hasSelector("VALIDATE"))return;$(e).find(this.Selector.VALIDATE).removeClass("is-invalid").addClass("is-valid");let n=$(e).find(".valid-feedback");n.length&&n.text(t.msg)},this.markInvalid=function(e,t){if(!this.hasSelector("VALIDATE"))return;$(e).find(this.Selector.VALIDATE).removeClass("is-valid").addClass("is-invalid");let n=$(e).find(".invalid-feedback");n.length&&n.text(t.msg)},this.receiveMessage=function(e,t){if(!t.type)return;let[n,i=null]=t.type.split(":");if("update"===n){if(!i||void 0===t.data)return;return"choices"===i&&this.updateChoices(e,t.data),void("values"===i&&this.updateValues(e,t.data))}if("mark"===n){if(!i)return;return"valid"===i&&this.markValid(e,t.data),void("invalid"===i&&this.markInvalid(e,t.data))}},this.hasSelector=function(e){return void 0!==this.Selector&&void 0!==this.Selector[e]},this.isFormElement=function(e){return $(e).parents(".yonder-form[id]").length>0}}.call(Shiny.InputBinding.prototype);const e=new Shiny.InputBinding;$.extend(e,{find:function(e){return $(e).find(".yonder-address[id]")},getValue:function(e){var t=$(e).find("input"),n=["line1","line2","city","state","zip"],i=t.map((e,t)=>$(t).val()).get().reduce(function(e,t,i){return e[n[i]]=t,e},{});return Object.values(i).reduce((e,t)=>e||t)?i:null},getState:function(e,t){return{value:this.getValue(e)}},subscribe:function(e,t){$(e).on("change.addressInputBinding",function(e){t()})},unsubscribe:function(e){$(e).off(".addressInputBinding")}}),Shiny.inputBindings.register(e,"yonder.addressInput");let t=new Shiny.InputBinding;$(()=>{$(document.body).append($("<div class='yonder-alert-container' id='alert-container'></div>"))}),$.extend(t,{Selector:{SELF:".yonder-alert-container"},Alerts:[],getValue:function(e){return null},receiveMessage:function(e,t){if(void 0!==t.type){if("show"===t.type){let e=t.data,n=$(e.content);return e.action&&(n.append($(`<button class="btn btn-link alert-link alert-action">${e.action}</button>`)),n.on("click",".alert-action",t=>{Shiny.onInputChange(e.action,!0)})),this.Alerts.push({el:n,action:e.action}),n.appendTo($(this.Selector.SELF)).velocity({top:0,opacity:1},{duration:300,easing:"easeOutCubic",queue:!1}),void(null!==e.duration&&setTimeout(()=>{if(0===this.Alerts.length)return;let e=this.Alerts.shift();e.action&&Shiny.onInputChange(e.action,null),e.el.remove()},e.duration))}if("close"===t.type){if(0===this.Alerts.length)return;let e=t.data,n="number"==typeof e.index?[e.index]:e.index,i="string"==typeof e.text?[e.text]:e.text,r=Object.entries(e.attrs).map(e=>`[${e[0]}${e[1]?("class"===e[0]?"*=":"=")+e[1]:""}]`).join("");this.Alerts=this.Alerts.filter((e,t)=>{let a=$(e.el);return!(n.includes(t)||i.includes(a.text())||a.is(r))||(e.action&&Shiny.onInputChange(e.action,null),a.remove(),!1)})}}}}),Shiny.inputBindings.register(t,"yonder.alertInput");let n=new Shiny.InputBinding;$.extend(n,{Selector:{SELF:".yonder-button-group[id]",VALUE:".btn",LABEL:".btn"},Events:[{type:"click",selector:"button",callback:(e,t,n)=>n._VALUES[e.id]=t.getAttribute("data-value")}],_VALUES:{},getType:e=>"yonder.buttonGroup",getValue:function(e){return{force:Date.now(),value:this._VALUES[e.id]}}}),Shiny.inputBindings.register(n,"yonder.buttonGroupInput");let i=new Shiny.InputBinding;$.extend(i,{Selector:{SELF:".yonder-button[id]",VALUE:".yonder-button",LABEL:".yonder-button"},Events:[{type:"click",callback:(e,t,n)=>n._VALUES[e.id]+=1}],_VALUES:{},initialize:function(e){this._VALUES[e.id]=0},getType:function(e){return"yonder.button"},getValue:function(e){return this._VALUES[e.id]}}),Shiny.inputBindings.register(i,"yonder.buttonInput");let r=new Shiny.InputBinding;$.extend(r,{Selector:{SELF:".yonder-checkbar[id]",VALUE:".btn input",LABEL:".btn > span",SELECTED:".btn.active input"},Events:[{type:"change"},{type:"click"}],getState:function(e,t){return{value:this.getValue(e)}}}),Shiny.inputBindings.register(r,"yonder.checkbarInput");let a=new Shiny.InputBinding;$.extend(a,{Selector:{SELF:".yonder-checkbox[id]",VALUE:".custom-control-input",LABEL:".custom-control-label",SELECTED:".custom-control-input:checked:not(:disabled)",VALIDATE:".custom-control-input"},Events:[{type:"change"}],getValue:function(e){var t=$(e).find(`${this.Selector.SELECTED}`).data("value");return void 0===t?null:t},_getLabel:function(e){return $(e).find(`${this.Selector.LABEL}`).text()},getState:function(e,t){return{label:this._getLabel(e),value:this.getValue(e)}}}),Shiny.inputBindings.register(a,"yonder.checkboxInput");let o=new Shiny.InputBinding;$.extend(o,{Selector:{SELF:".yonder-date[id]"},Events:[{type:"dateinput:close"}],initialize:function(e){let t=$(e).data(),n={onClose:(t,n,i)=>$(e).trigger("dateinput:close")};"multiple"===t.mode&&"alt-format"===t.altFormat&&(n.altFormat="M j, Y",n.conjunction="; "),!t.defaultDate||"range"!==t.mode&&"multiple"!==t.mode||(n.defaultDate=t.defaultDate.split("\\,"),e.removeAttribute("data-default-date")),t.enable&&(n.enable=t.enable.split("\\,"),e.removeAttribute("data-enable")),flatpickr(e,n)},getType:()=>"yonder.date",getValue:e=>e._flatpickr.selectedDates,receiveMessage:function(e,t){if(null!==t.type)throw"receiveMessage not implemented for date inputs"}}),Shiny.inputBindings.register(o,"yonder.dateInput");let d=new Shiny.InputBinding;$(".yonder-file").on("click",".input-group-append",function(e){$(e.delegateTarget).find("input[type='file']").trigger("click")}),$.extend(d,{Selector:{SELF:".yonder-file[id]"},getValue:function(e){return null},sendFile:function(e,t,n,i,r){let a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Content-Type","application/octet-stream"),a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&200==a.status&&i&&Shiny.shinyapp.makeRequest("uploadEnd",[t,r.id],e=>{let t=$(r).find("input[type='file']");t.val(""),t.text("Choose file")},e=>{console.error(`uploadEnd request failed for ${r.id}: ${e}`)})},a.send(n)},doUpload:function(e,t){if(!t)return;let n=$.map(t,e=>({name:e.name,size:e.size,type:e.type}));Shiny.shinyapp.makeRequest("uploadInit",[n],n=>{let i=n.jobId,r=n.uploadUrl;for(var a=0;a<t.length;a++)this.sendFile(r,i,t[a],a===t.length-1,e)},t=>{console.error(`uploadInit request failed for ${e.id}: ${t}`)})},subscribe:function(e,t){let n=$(e).find("input[type='file']");if(!n.length)return;let i=n.get(0);$(e).find(".btn").length?$(e).on("click.fileInputBinding",".btn",t=>{this.doUpload(e,i.files)}):$(e).on("change.fileInputBinding",t=>{this.doUpload(e,i.files)}),$(e).on("dragover.fileInputBinding",e=>{e.stopPropagation(),e.preventDefault()}),$(e).on("dragenter.fileInputBinding",e=>{e.stopPropagation(),e.preventDefault()}),$(e).on("drop.fileInputBinding",t=>{t.stopPropagation(),t.preventDefault(),i.hasAttribute("multiple")?this.doUpload(e,t.originalEvent.dataTransfer.files):this.doUpload(e,t.originalEvent.dataTransfer.files[0])})},unsubscribe:function(e){$(e).off(".fileInputBinding")}}),Shiny.inputBindings.register(d,"yonder.fileInput");let l=new Shiny.InputBinding;$.extend(l,{Events:[{type:"submit",callback:e=>{let t=e.querySelector("button[data-type='submit']");null!==t&&t.setAttribute("data-value",+t.getAttribute("data-value")+1)}}],initialize:function(e){let t=e.querySelector("button[data-type='submit']");null!==t&&t.setAttribute("data-value",0)},find:function(e){let t=$(e).find(".yonder-form[id]");return t.children("button[data-type='submit']").length?t:null},getValue:function(e){let t=e.querySelector("button[data-type='submit']");if(null!==t)return+t.getAttribute("data-value")}}),Shiny.inputBindings.register(l,"yonder.formInput");let u=new Shiny.InputBinding;$.extend(u,{Selector:{SELF:".yonder-group[id]",VALUE:"input",SELECTED:".input-group-prepend .input-group-text, input, .input-group-append .input-group-text"},Events:[{type:"input",debounce:!0},{type:"change",debounce:!0}],getType:function(e){return"yonder.group"},getState:function(e){return{value:this.getValue(e)}}}),Shiny.inputBindings.register(u,"yonder.groupInput");let s=new Shiny.InputBinding;$.extend(s,{Selector:{SELF:".yonder-link[id]"},Events:[{type:"click",callback:(e,t,n)=>n._VALUES[e.id]+=1}],_VALUES:{},initialize:function(e){this._VALUES[e.id]=0},getType:function(e){return"yonder.link"},getValue:function(e){return{value:this._VALUES[e.id],id:e.id}}}),Shiny.inputBindings.register(s,"yonder.linkInput");let c=new Shiny.InputBinding;$.extend(c,{find:function(e){return $(e).find(".yonder-login[id]")},getValue:function(e){var t=$(e).find(".form-control").map((e,t)=>$(t).val()).get();return t[0]||t[1]?{username:t[0],password:t[1]}:null},getState:function(e,t){return{value:this.getValue(e)}},subscribe:function(e,t){$(e).on("click.loginInputBinding",".btn",function(e){t()})},unsubscribe:function(e){$(e).off(".loginInputBinding")}}),Shiny.inputBindings.register(c,"yonder.loginInput");let p=new Shiny.InputBinding;$(".yonder-nav .nav-link").on("click",".nav-link",e=>e.preventDefault()),$.extend(p,{Selector:{SELF:".yonder-nav[id]",SELECTED:".nav-link.active"},Events:[{type:"click",selector:".nav-link:not(.dropdown-toggle)",callback:(e,t)=>{e.querySelector(".nav-link.active").classList.remove("active"),t.classList.add("active")}},{type:"click",selector:".dropdown-item",callback:(e,t)=>{e.querySelector(".nav-link.active").classList.remove("active"),t.parentNode.parentNode.firstElementChild.classList.add("active")}}]}),Shiny.addCustomMessageHandler("yonder:pane",e=>{if(void 0===e.type||void 0===e.data||void 0===e.data.target)return;let t=document.getElementById(e.data.target);if(null!==t&&t.parentElement.classList.contains("tab-content")&&"show"===e.type){let e=t.parentElement.querySelector(".active");const n=()=>{const n=$.Event("hidden.bs.tab",{relatedTarget:t}),i=$.Event("shown.bs.tab",{relatedTarget:e});$(e).trigger(n),$(t).trigger(i)};bootstrap.Tab.prototype._activate(t,t.parentElement,n)}}),Shiny.inputBindings.register(p,"yonder.navInput");let g=new Shiny.InputBinding;$.extend(g,{Selector:{SELF:".yonder-radio[id]",VALUE:".custom-control-input",LABEL:".custom-control-label",SELECTED:".custom-control-input:checked:not(:disabled)",VALIDATE:".custom-control-input"},Events:[{type:"change"}],getState:function(e,t){return{value:this.getValue(e)}}}),Shiny.inputBindings.register(g,"yonder.radioInput");let y=new Shiny.InputBinding;$.extend(y,{Selector:{SELF:".yonder-radiobar[id]",VALUE:".btn input",LABEL:".btn > span",SELECTED:".btn input:checked"},Events:[{type:"click"},{type:"change"}],getState:function(e,t){return{value:this.getValue(e)}}}),Shiny.inputBindings.register(y,"yonder.radiobarInput");let f=new Shiny.InputBinding;$.extend(f,{Selector:{SELF:".yonder-range[id]"},Events:[{type:"change"}],initialize:e=>{let t=$(e),n=t.find("input[type='text']");n.ionRangeSlider();let i=t.attr("class").split(/\s+/).filter(e=>/^bg-[a-z-]+$/.test(e)).join(" ");i&&(t.find(".irs-slider,.irs-bar,.irs-bar-edge,.irs-to,.irs-from,.irs-single,.irs-slider").addClass(i),t.removeClass(i)),n.data("no-fill")&&t.find(".irs-bar,.irs-bar-edge").addClass("no-fill")},getId:function(e){return e.id},getValue:function(e){var t=$("input[type='text']",e),n=t.data("ionRangeSlider");return"double"==t.data("type")?[n.result.from,n.result.to]:"single"==t.data("type")?null!==n.result.from_value?n.result.from_value.replace("&#44;",","):n.result.from:void 0},getState:function(e,t){return{value:this.getValue(e)}},receiveMessage:function(e,t){console.error("receiveMessage: not implemented for range input")},dispose:function(e){$("input[type='text']",e).data("ionRangeSlider").destroy()}}),Shiny.inputBindings.register(f,"yonder.rangeInput");let h=new Shiny.InputBinding;$.extend(h,{Selector:{SELF:".yonder-select[id]",VALUE:"option",LABEL:"option",SELECTED:"option:checked",VALIDATE:"select"},Events:[{type:"change"}],getState:function(e,t){return{value:this.getValue(e)}}}),Shiny.inputBindings.register(h,"yonder.selectInput");let v=new Shiny.InputBinding;$.extend(v,{Selector:{SELF:".yonder-tabs[id]",SELECTED:".nav-item > .active:not(.disabled)"},Events:[{type:"shown.bs.tab"}],initialize:function(e){let t=e.id,n=$(e).find(".nav-link"),i=$(`.tab-content[data-tabs="${t}"] > .tab-pane`),r=n.map((e,t)=>t.classList.contains("active")).get().indexOf(!0);if(0===n.length||0===i.length)throw"tabs input: missing tabs or panes";if(n.length!=i.length)throw"tabs input: incorrect number of tabs for panes";i.each((e,n)=>{let i=$(n);i.attr({id:`${t}-pane-${e}`,"aria-labelledby":`${t}-tab-${e}`}),i.removeAttr("data-tabs"),e===r&&i.addClass("show active")}),n.each((e,n)=>{$(n).attr({id:`${t}-tab-${e}`,"data-toggle":"tab",href:`#${t}-pane-${e}`,"aria-controls":`${t}-pane-${e}`})})}}),Shiny.inputBindings.register(v,"yonder.tabsInput");let S=new Shiny.InputBinding;$.extend(S,{Selector:{SELF:".yonder-textual[id]",VALIDATE:"input"},Events:[{type:"change",debounce:!0},{type:"input",debounce:!0}],getValue:function(e){var t=$(e).find("input"),n=void 0===t.val()?null:t.val();return null===n?null:"number"===t.attr("type")?parseInt(n,10):n},getType:function(e){var t=$("input",e).attr("type");return"date"===t?"yonder.date":"time"===t&&"yonder.time"},getState:function(e,t){return{value:this.getValue(e)}},getRatePolicy:function(){return{policy:"debounce",delay:250}}}),Shiny.inputBindings.register(S,"yonder.textualInput");let b=new Shiny.OutputBinding;$.extend(b,{find:function(e){return $(e).find(".yonder-badge[id]")},getId:function(e){return e.id},renderValue:function(e,t){void 0!==t.data&&(e.innerHTML=t.data)},renderError:function(e,t){},clearError:function(e){}}),Shiny.outputBindings.register(b,"yonder.badgeOutput");let E=new Shiny.OutputBinding;$.extend(E,{find:function(e){return $(e).find(".yonder-sparkline[id]")},getId:function(e){return e.id},renderValue:function(e,t){if(void 0!==t.data){let n=e.getAttribute("data-labels");e.innerHTML=n?`${t.from}{${t.data.join(",")}}${t.to}`:`{${t.data.join(",")}}`}},renderError:function(e,t){},clearError:function(e){}}),Shiny.outputBindings.register(E,"yonder.sparklineOutput"),$.extend(Shiny.progressHandlers,{"yonder-progress":e=>{if(!e.type||!e.data.outlet)return!1;let t=$(`#${e.data.outlet}`);if("show"===e.type){let n=$(e.data.content);return n[0].id&&t.find(`#${n[0].id}`).length?t.find(`#${n[0].id}`).replaceWith(n):t.append(n),!0}return!1}});let m=new Shiny.InputBinding;$.extend(m,{Selector:{SELF:".yonder-table[id]"},Type:"yonder.table",Events:[{type:"chabudai:select"},{type:"chabudai:edited"}],getValue:function(e){return JSON.stringify($(e).table("selected"))},receiveMessage:function(e,t){}});let L=new Shiny.OutputBinding;$.extend(L,{find:function(e){return $(e).find(".yonder-table[id]")},renderValue:function(e,t){t.data&&$(e).table({data:t.data})}}),Shiny.inputBindings.register(m,"yonder.tableInput"),Shiny.outputBindings.register(L,"yonder.tableOutput");let I=new Shiny.InputBinding;$(()=>{$(".yonder-list-group[id]").on("click",".list-group-item-action",e=>(e.target.classList.toggle("active"),!0))}),$.extend(I,{find:e=>$(e).find(".yonder-list-group[id]"),getId:e=>e.id,getValue:e=>$(e).children(".list-group-item.active:not(.disabled)").map((e,t)=>$(t).data("value")).get(),getState:function(e,t){return{value:this.getValue(e)}},subscribe:(e,t)=>{$(e).on("change.listGroupInputBinding",e=>t())},unsubscribe:e=>$(e).off(".listGroupInputBinding")});let A=new Shiny.OutputBinding;$.extend(A,{find:e=>$(e).find(".yonder-list-group[id]"),getId:e=>e.id,renderValue:(e,t)=>{if(!t.items)return;let n="object"==typeof t.items?Object.values(t.items):t.items;Shiny.renderContent(e,n.join("\n"))}}),Shiny.inputBindings.register(I,"yonder.listGroupInput"),Shiny.outputBindings.register(A,"yonder.listGroupOutput"),Shiny.addCustomMessageHandler("yonder:modal",function(e){if(void 0===e.type)return!1;if("close"===e.type){let e=document.body.querySelector(".modal");return null!==e&&(Shiny.unbindAll(e),$(e).modal("hide"),!0)}if("show"===e.type){let t=document.body.querySelector(".modal");return null!==t?t.innerHTML=e.data.content:($(document.body).append($(`<div class="modal fade" tabindex=-1 role="dialog">${e.data.content}</div>`)),t=document.body.querySelector(".modal")),void 0!==e.data.dependencies&&Shiny.renderDependencies(e.data.dependencies),Shiny.initializeInputs(t),Shiny.bindAll(t),$(t).modal("show"),!0}return!1}),Shiny.addCustomMessageHandler("yonder:collapse",e=>{if(void 0===e.type||void 0===e.data||void 0===e.data.target)return!1;if("show"===e.type||"hide"===e.type||"toggle"===e.type){let t=document.getElementById(e.data.target);return null!==t&&($(t).collapse(e.type),!0)}return!1}),$(()=>{$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover(),$(document).on("shiny:connected",function(){$('.yonder-submit[data-type="submit"]').attr("type","submit")}),Shiny.addCustomMessageHandler("yonder:popover",e=>{if(void 0!==e.data.target){if("show"==e.type){let t=e.data,n=`#${t.target}`;return $(n).popover({title:()=>void 0,content:()=>void 0,template:t.content,placement:t.placement,trigger:"manual"}),t.duration&&setTimeout(()=>$(n).popover("hide"),t.duration),void $(n).popover("show")}"close"!=e.type||$(`#${e.data.id}`).popover("hide")}}),Shiny.addCustomMessageHandler("yonder:download",function(e){if(!(e.filename&&e.token&&e.key))throw"invalid download event";const t="/session/"+e.token+"/download/"+e.key;window.navigator.userAgent;if(ua.indexOf("MSIE ")>0){let n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=(()=>saveAs(n.response,e.filename)),n.send()}else fetch(t).then(e=>e.blob()).then(t=>{saveAs(t,e.filename)})})})}();
//# sourceMappingURL=yonder.min.js.map
