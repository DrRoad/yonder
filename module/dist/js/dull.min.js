!function(){"use strict";const t=new Shiny.InputBinding;$.extend(t,{find:function(t){return $(t).find(".dull-address-input[id]")},getValue:function(t){var e=$(t).find("input"),n=["line1","line2","city","state","zip"],i=e.map((t,e)=>$(e).val()).get().reduce(function(t,e,i){return t[n[i]]=e,t},{});return Object.values(i).reduce((t,e)=>t||e)?i:null},getState:function(t,e){return{value:this.getValue(t)}},subscribe:function(t,e){$(t).on("change.addressInputBinding",function(t){e()})},unsubscribe:function(t){$(t).off(".addressInputBinding")}});let e=new Shiny.InputBinding;$.extend(e,{Selector:{SELF:".dull-alert-container"},Alerts:[],getValue:function(t){return null},receiveMessage:function(t,e){if(void 0!==e.type){if("show"===e.type){let t=e.data,n=t.attrs||{},i=t.color?`alert-${t.color}`:"",l=$(`<div class="alert ${i} fade show dull-alert" role="alert">${t.text}</div>`);return t.action&&(l.append($(`<button class="btn btn-link alert-action">${t.action}</button>`)),l.on("click",".alert-action",e=>{Shiny.onInputChange(t.action,!0)})),Object.entries(n).forEach(t=>{"class"==t[0]?l.addClass(t[1]):l.attr(...t)}),this.Alerts.push({el:l,action:t.action}),l.appendTo($(this.Selector.SELF)).velocity({top:0,opacity:1},{duration:300,easing:"easeOutCubic",queue:!1}),void(null!==t.duration&&setTimeout(()=>{if(0===this.Alerts.length)return;let t=this.Alerts.shift();t.action&&Shiny.onInputChange(t.action,null),t.el.remove()},t.duration))}if("close"===e.type){if(0===this.Alerts.length)return;let t=e.data,n="number"==typeof t.index?[t.index]:t.index,i="string"==typeof t.text?[t.text]:t.text,l=Object.entries(t.attrs).map(t=>`[${t[0]}${t[1]?("class"===t[0]?"*=":"=")+t[1]:""}]`).join("");this.Alerts=this.Alerts.filter((t,e)=>{let u=$(t.el);return!(n.includes(e)||i.includes(u.text())||u.is(l))||(t.action&&Shiny.onInputChange(t.action,null),u.remove(),!1)})}}}});let n=new Shiny.InputBinding;$.extend(n,{Selector:{SELF:".dull-button-group-input",VALUE:".btn",LABEL:".btn"},_value:null,getValue:function(t){return this._value},subscribe:function(t,e){var n=this;$(t).on("click.buttonGroupInputBinding","button",function(t){n._value=$(this).data("value"),e()})},unsubscribe:function(t){$(t).off(".buttonGroupInputBinding","button")}});let i=new Shiny.InputBinding;$.extend(i,{Selector:{SELF:".dull-button-input",VALUE:".dull-button-input",LABEL:".dull-button-input"},Events:[{type:"click",callback:t=>t.setAttribute("data-value",+t.getAttribute("data-value")+1)}],initialize:function(t){t.setAttribute("data-value",0)},getType:function(t){return"dull.button"},getValue:function(t){return t.getAttribute("data-value")}});let l=new Shiny.InputBinding;$.extend(l,{Selector:{SELF:".dull-checkbar-input",VALUE:".btn input",LABEL:".btn > span",SELECTED:".btn.active input"},Events:[{type:"change"},{type:"click"}],getState:function(t,e){return{value:this.getValue(t)}}});let u=new Shiny.InputBinding;$.extend(u,{Selector:{SELF:".dull-checkbox-input",VALUE:".custom-control-input",LABEL:".custom-control-label",SELECTED:".custom-control-input:checked:not(:disabled)",VALIDATE:".custom-control-input"},Events:[{type:"change"}],getValue:function(t){var e=$(t).find(`${this.Selector.SELECTED}`).data("value");return void 0===e?null:e},_getLabel:function(t){return $(t).find(`${this.Selector.LABEL}`).text()},getState:function(t,e){return{label:this._getLabel(t),value:this.getValue(t)}}});let a=new Shiny.InputBinding;$.extend(a,{Selector:{SELF:".dull-date-input"},Events:[{type:"dateinput:close"}],initialize:function(t){let e=$(t).data(),n={onClose:(e,n,i)=>$(t).trigger("dateinput:close")};"multiple"===e.mode&&"alt-format"===e.altFormat&&(n.altFormat="M j, Y",n.conjunction="; "),!e.defaultDate||"range"!==e.mode&&"multiple"!==e.mode||(n.defaultDate=e.defaultDate.split("\\,"),t.removeAttribute("data-default-date")),e.enable&&(n.enable=e.enable.split("\\,"),t.removeAttribute("data-enable")),flatpickr(t,n)},getType:()=>"dull.date",getValue:t=>t._flatpickr.selectedDates,receiveMessage:function(t,e){if(null!==e.type)throw"receiveMessage not implemented for date inputs"}});let o=new Shiny.InputBinding;$.extend(o,{Selector:{SELF:".dull-dropdown-input",LABEL:".dropdown-item",VALUE:".dropdown-item"},getValue:function(t){return null},getState:function(t,e){return{value:this.getValue(t)}},subscribe:function(t,e){},unsubscribe:function(t){},receiveMessage:function(t){console.error("receiveMessage: not implemented for dropdown input")}});let d=new Shiny.InputBinding;$.extend(d,{Selector:{SELF:".dull-file-input"},getValue:function(t){return null},sendFile:function(t,e,n,i,l){let u=new XMLHttpRequest;u.open("POST",t,!0),u.setRequestHeader("Content-Type","application/octet-stream"),u.onreadystatechange=function(){u.readyState==XMLHttpRequest.DONE&&200==u.status&&i&&Shiny.shinyapp.makeRequest("uploadEnd",[e,l.id],t=>{let e=$(l).find("input[type='file']");e.val(""),e.text("Choose file")},t=>{console.error(`uploadEnd request failed for ${l.id}: ${t}`)})},u.send(n)},doUpload:function(t,e){if(!e)return;let n=$.map(e,t=>({name:t.name,size:t.size,type:t.type}));Shiny.shinyapp.makeRequest("uploadInit",[n],n=>{let i=n.jobId,l=n.uploadUrl;for(var u=0;u<e.length;u++)this.sendFile(l,i,e[u],u===e.length-1,t)},e=>{console.error(`uploadInit request failed for ${t.id}: ${e}`)})},subscribe:function(t,e){let n=$(t).find("input[type='file']");if(!n.length)return;let i=n.get(0);$(t).find(".btn").length?$(t).on("click.fileInputBinding",".btn",e=>{this.doUpload(t,i.files)}):$(t).on("change.fileInputBinding",e=>{this.doUpload(t,i.files)}),$(t).on("dragover.fileInputBinding",t=>{t.stopPropagation(),t.preventDefault()}),$(t).on("dragenter.fileInputBinding",t=>{t.stopPropagation(),t.preventDefault()}),$(t).on("drop.fileInputBinding",e=>{e.stopPropagation(),e.preventDefault(),i.hasAttribute("multiple")?this.doUpload(t,e.originalEvent.dataTransfer.files):this.doUpload(t,e.originalEvent.dataTransfer.files[0])})},unsubscribe:function(t){$(t).off(".fileInputBinding")}});let r=new Shiny.InputBinding;$.extend(r,{Events:[{type:"submit",callback:t=>{let e=t.querySelector("button[data-type='submit']");null!==e&&e.setAttribute("data-value",+e.getAttribute("data-value")+1)}}],initialize:function(t){let e=t.querySelector("button[data-type='submit']");null!==e&&e.setAttribute("data-value",0)},find:function(t){let e=$(t).find(".dull-form-input[id]");return e.children("button[data-type='submit']").length?e:null},getValue:function(t){let e=t.querySelector("button[data-type='submit']");if(null!==e)return+e.getAttribute("data-value")}});let s=new Shiny.InputBinding;$.extend(s,{Selector:{SELF:".dull-group-input",VALUE:"input",SELECTED:".input-group-prepend .input-group-text, input, .input-group-append .input-group-text"},Events:[{type:"input",debounce:!0},{type:"change",debounce:!0}],getType:function(t){return"dull.group.input"},getState:function(t){return{value:this.getValue(t)}}});let c=new Shiny.InputBinding;$.extend(c,{Selector:{SELF:".dull-link-input"},Events:[{type:"click",callback:t=>t.setAttribute("data-value",+t.getAttribute("data-value")+1)}],initialize:function(t){t.setAttribute("data-value",0)},getType:function(t){return"dull.link"},getValue:function(t){return{value:t.getAttribute("data-value"),id:t.id}}});let p=new Shiny.InputBinding;$.extend(p,{find:function(t){return $(t).find(".dull-login-input[id]")},getValue:function(t){var e=$(t).find(".form-control").map((t,e)=>$(e).val()).get();return e[0]||e[1]?{username:e[0],password:e[1]}:null},getState:function(t,e){return{value:this.getValue(t)}},subscribe:function(t,e){$(t).on("click.loginInputBinding",".btn",function(t){e()})},unsubscribe:function(t){$(t).off(".loginInputBinding")}});let f=new Shiny.InputBinding;$.extend(f,{find:function(t){return $(t).find(".dull-nav[id]")},getValue:function(t){return $(".nav",t).find(".active").data("value")},getState:function(t,e){return{value:this.getValue(t)}},subscribe:function(t,e){$(t).on("shown.bs.tab.navInputBinding",function(t){e()})},unsubscribe:function(t){$(t).off(".navInputBinding")}});let g=new Shiny.InputBinding;$.extend(g,{Selector:{SELF:".dull-radio-input",VALUE:".custom-control-input",LABEL:".custom-control-label",SELECTED:".custom-control-input:checked:not(:disabled)",VALIDATE:".custom-control-input"},Events:[{type:"change"}],getState:function(t,e){return{value:this.getValue(t)}}});let h=new Shiny.InputBinding;$.extend(h,{Selector:{SELF:".dull-radiobar-input",VALUE:".btn input",LABEL:".btn > span",SELECTED:".btn input:checked"},getState:function(t,e){return{value:this.getValue(t)}},subscribe:function(t,e){$(t).on("click.radiobarInputBinding",function(t){e()}),$(t).on("change.radiobarInputBinding",function(t){e()})},unsubcribe:function(t){$(t).off(".radiobarInputBinding")}});let b=new Shiny.InputBinding;$.extend(b,{Selector:{SELF:".dull-range-input"},Events:[{type:"change"}],initialize:t=>{let e=$(t),n=e.find("input[type='text']");n.ionRangeSlider();let i=e.attr("class").split(/\s+/).filter(t=>/^bg-[a-z-]+|(lighten|darken)-[1234]/.test(t)).join(" ");i&&e.find(".irs-slider,.irs-bar,.irs-bar-edge,.irs-to,.irs-from,.irs-single,.irs-slider").addClass(i),n.data("no-fill")&&e.find(".irs-bar,.irs-bar-edge").addClass("no-fill")},getId:function(t){return t.id},getValue:function(t){var e=$("input[type='text']",t),n=e.data("ionRangeSlider");return"double"==e.data("type")?[n.result.from,n.result.to]:"single"==e.data("type")?null!==n.result.from_value?n.result.from_value.replace("&#44;",","):n.result.from:void 0},getState:function(t,e){return{value:this.getValue(t)}},receiveMessage:function(t,e){console.error("receiveMessage: not implemented for range input")},dispose:function(t){$("input[type='text']",t).data("ionRangeSlider").destroy()}});let v=new Shiny.InputBinding;$.extend(v,{Selector:{SELF:".dull-select-input",VALUE:"option",LABEL:"option",SELECTED:"option:checked",VALIDATE:"select"},Events:[{type:"change"}],getState:function(t,e){return{value:this.getValue(t)}}});let m=new Shiny.InputBinding;$.extend(m,{Selector:{SELF:".dull-tabs-input[id]",SELECTED:".nav-item > .active:not(.disabled)"},Events:[{type:"shown.bs.tab"}],initialize:function(t){let e=t.id,n=$(t).find(".nav-link"),i=$(`.tab-content[data-tabs="${e}"] > .tab-pane`),l=n.map((t,e)=>e.classList.contains("active")).get().indexOf(!0);if(0===n.length||0===i.length)throw"tabs input: missing tabs or panes";if(n.length!=i.length)throw"tabs input: incorrect number of tabs for panes";i.each((t,n)=>{let i=$(n);i.attr({id:`${e}-pane-${t}`,"aria-labelledby":`${e}-tab-${t}`}),i.removeAttr("data-tabs"),t===l&&i.addClass("show active")}),n.each((t,n)=>{$(n).attr({id:`${e}-tab-${t}`,"data-toggle":"tab",href:`#${e}-pane-${t}`,"aria-controls":`${e}-pane-${t}`})})}});let y=new Shiny.InputBinding;$.extend(y,{Selector:{SELF:".dull-textual-input",VALIDATE:"input"},Events:[{type:"change",debounce:!0},{type:"input",debounce:!0}],getValue:function(t){var e=$(t).find("input"),n=void 0===e.val()?null:e.val();return null===n?null:"number"===e.attr("type")?parseInt(n,10):n},getType:function(t){var e=$("input",t).attr("type");return"date"===e?"dull.date.input":"time"===e&&"dull.time.input"},getState:function(t,e){return{value:this.getValue(t)}},getRatePolicy:function(){return{policy:"debounce",delay:250}}});let S=new Shiny.OutputBinding;$.extend(S,{find:function(t){return $(t).find(".dull-badge-output[id]")},getId:function(t){return t.id},renderValue:function(t,e){void 0!==e.data&&(t.innerHTML=e.data)},renderError:function(t,e){},clearError:function(t){}});let E=new Shiny.OutputBinding;$.extend(E,{find:function(t){return $(t).find(".dull-sparkline-output[id]")},getId:function(t){return t.id},renderValue:function(t,e){if(void 0!==e.data){let n=t.getAttribute("data-labels");t.innerHTML=n?`${e.from}{${e.data.join(",")}}${e.to}`:`{${e.data.join(",")}}`}},renderError:function(t,e){},clearError:function(t){}});let I=new Shiny.InputBinding;$.extend(I,{Selector:{SELF:".dull-table-thruput"},Type:"dull.table.input",Events:[{type:"chabudai:select"},{type:"chabudai:edited"}],getValue:function(t){return JSON.stringify($(t).table("selected"))},receiveMessage:function(t,e){}});let L=new Shiny.OutputBinding;$.extend(L,{find:function(t){return $(t).find(".dull-table-thruput[id]")},renderValue:function(t,e){e.data&&$(t).table({data:e.data})}});let A=new Shiny.InputBinding;$.extend(A,{find:t=>$(t).find(".dull-list-group-thruput[id]"),getId:t=>t.id,getValue:t=>$(t).children(".list-group-item.active:not(.disabled)").map((t,e)=>$(e).data("value")).get(),getState:function(t,e){return{value:this.getValue(t)}},subscribe:(t,e)=>{$(t).on("change.listGroupInputBinding",t=>e())},unsubscribe:t=>$(t).off(".listGroupInputBinding")});let V=new Shiny.OutputBinding;$.extend(V,{find:t=>$(t).find(".dull-list-group-thruput[id]"),getId:t=>t.id,renderValue:(t,e)=>{if(e.items){let n=e.items.join("\n");Shiny.renderContent(t,n)}}});const B={"dull.addressInput":t,"dull.alertInput":e,"dull.buttonGroupInput":n,"dull.buttonInput":i,"dull.checkbarInput":l,"dull.checkboxInput":u,"dull.dateInput":a,"dull.dropdownInput":o,"dull.fileInput":d,"dull.formInput":r,"dull.groupInput":s,"dull.linkInput":c,"dull.loginInput":p,"dull.navInput":f,"dull.radioInput":g,"dull.radiobarInput":h,"dull.rangeInput":b,"dull.selectInput":v,"dull.tableInput":I,"dull.tabsInput":m,"dull.textualInput":y,"dull.listGroupInputBinding":A},w={"dull.badgeOutput":S,"dull.sparklineOutput":E,"dull.tableOutput":L,"dull.listGroupOutput":V};(function(){this.find=function(t){return t.querySelectorAll(`${this.Selector.SELF}[id]`)},this.getId=function(t){return t.id},this.getType=function(t){return!!this.Type&&this.Type},this.getValue=function(t){if(!this.hasSelector("SELECTED"))return null;let e=$(t).find(`${this.Selector.SELECTED}`).map((t,e)=>{let n=$(e);return n.is("[data-value]")?n.data("value"):n.is("input")?n.val():n.text()}).get();return void 0===e?null:e},this.subscribe=function(t,e){if(this.isFormElement(t))$(t).closest(".dull-form-input[id]").on("submit",t=>e());else if(void 0!==this.Events&&this.Events.length)for(const n of this.Events||[])$(t).on(`${n.type}.dull`,i=>{n.callback&&n.callback(t),e(n.debounce||!1)})},this.unsubscribe=function(t){$(t).off("dull")},this.updateChoices=function(t,e){if(!this.hasSelector("VALUE")||!this.hasSelector("LABEL"))return;if(this.Selector.VALUE===this.Selector.SELF){let n=e[$(t).data("value")];return void(void 0!==n&&$(t).html(n))}let n=$(t).find(`${this.Selector.VALUE}`),i=$(t).find(`${this.Selector.LABEL}`);n.length==i.length?n.each((t,n)=>{let l=$(n),u=$(i.get(t)),a=e[l.data("value")];void 0!==a&&u.html(a)}):console.error("updateChoices: mismatched number of inputs and labels")},this.updateValues=function(t,e){if(this.hasSelector("VALUE")){if("string"==typeof e||Array.isArray(e)){let n=$(t).find(`${this.Selector.VALUE}`),i="string"==typeof e?[e]:e;return n.has(":not(input[type='text'])").length?void console.error("updateValues: expecting all inputs to be text if new values are unnamed"):n.length!=i.length?void console.error("updateValues: mismatched number of inputs and values"):void n.each((t,e)=>{let n=$(e);n.val(i[t]),n.trigger("change")})}if(this.Selector.VALUE!==this.Selector.SELF)$(t).find(`${this.Selector.VALUE}`).each((t,n)=>{let i=$(n),l=e[i.data("value")];void 0!==l&&i.data("value",l)});else{let t=e[$input.data("value")];void 0!==t&&$input.data("value",t)}}},this.markValid=function(t,e){if(!this.hasSelector("VALIDATE"))return;$(t).find(this.Selector.VALIDATE).removeClass("is-invalid").addClass("is-valid");let n=$(t).find(".valid-feedback");n.length&&n.text(e.msg)},this.markInvalid=function(t,e){if(!this.hasSelector("VALIDATE"))return;$(t).find(this.Selector.VALIDATE).removeClass("is-valid").addClass("is-invalid");let n=$(t).find(".invalid-feedback");n.length&&n.text(e.msg)},this.receiveMessage=function(t,e){if(!e.type)return;let[n,i=null]=e.type.split(":");if("update"===n){if(!i||void 0===e.data)return;return"choices"===i&&this.updateChoices(t,e.data),void("values"===i&&this.updateValues(t,e.data))}if("mark"===n){if(!i)return;return"valid"===i&&this.markValid(t,e.data),void("invalid"===i&&this.markInvalid(t,e.data))}},this.hasSelector=function(t){return void 0!==this.Selector&&void 0!==this.Selector[t]},this.isFormElement=function(t){return $(t).parents(".dull-form-input[id]").length>0}}).call(Shiny.InputBinding.prototype),Object.keys(B).forEach(t=>{Shiny.inputBindings.register(B[t],t)}),Object.keys(w).forEach(t=>{Shiny.outputBindings.register(w[t],t)}),$(()=>{$('[data-toggle="tooltip"]').tooltip()}),$(()=>{$('[data-toggle="popover"]').popover()}),$(()=>{$(".dull-file-input").on("click",".input-group-append",function(t){$(t.delegateTarget).find("input[type='file']").trigger("click")})}),$(()=>{$("body").append($("<div class='dull-alert-container' id='alert-container'></div>"))}),$(()=>{$(".nav:not([role='tablist']) li").on("click",function(t){var e=$(this);$(".nav-link",e.parent(".nav")).removeClass("active"),$(".nav-link",e).addClass("active")})}),$(document).on("shiny:connected",function(){$('.dull-submit[data-type="submit"]').attr("type","submit")}),$(()=>{$(document).on("shown.bs.modal",".modal",function(t){$(".modal").find(".shiny-bound-output, .shiny-bound-input").length||(Shiny.initializeInputs(".modal"),Shiny.bindAll(".modal"))})}),$.extend(Shiny.progressHandlers,{"dull-progress":t=>{var e=$(".dull-progress-output #"+t.id);e.attr("style",(e,n)=>n.replace(/width: [0-9]+%/,"width: "+t.value+"%")).attr("aria-valuenow",t.value),t.label&&e.text(t.label),t.context&&e.attr("class",function(e,n){return n.replace(/bg-(?:primary|secondary|success|info|warning|danger|light|dark|white)/g,"bg-"+t.context)})}}),$.extend(Shiny.progressHandlers,{"dull-stream":t=>($("<li class='list-group-item'></li>").text(t.content).hide().appendTo($("#"+t.id)).fadeIn(300),!1)}),$(()=>{let t=document.querySelectorAll("[data-collapse-id]");t.length&&($(t).wrap(function(){let t={};for(const e of this.attributes)if(e.name.match(/^data[-]collapse/)){t[e.name.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^data-collapse-/,"")]=e.value}return t.class=`${t.class?t.class+" ":""}collapse`,$("<div>",t)}),$(document.querySelectorAll(".collapse")).collapse()),Shiny.addCustomMessageHandler("dull:collapse",function(t){if(!t.type||!t.type.match(/^(show|hide|toggle)$/))return;let e=document.getElementById(`${t.data.id}`);e&&e.classList.contains("collapse")&&$(e).collapse(t.type)})}),$(()=>{Shiny.addCustomMessageHandler("dull:popover",t=>{if(t.id){if(t.id=`#${t.id}`,"show"==t.type){let e=t.data;return $(t.id).popover({title:e.title||"",content:e.content,placement:e.placement,trigger:"manual"}),e.duration&&(setTimeout(()=>{$(document).off(".removePopover"),$(t.id).popover("hide")},e.duration),$(document).one("click.removePopover",e=>{$(t.id).popover("hide")})),void $(t.id).popover("show")}"close"!=t.type||$(t.id).popover("hide")}})}),$(()=>{Shiny.addCustomMessageHandler("dull:modal",function(t){if(!0===t.close)return $(".modal").modal("hide"),!0;var e;$(".modal").length?e=$(".modal"):(e=$(["<div class='modal fade' tabindex=-1 role='dialog'>","<div class='modal-dialog' role='document'>","<div class='modal-content'>","<div class='modal-header'>","<h5 class='modal-title'></h5>","<button type='button' class='close' data-dismiss='modal' aria-label='Close'>","<span class='fa fa-times-rectangle'></span>","</button>","</div>","<div class='container-fluid'>","<div class='modal-body'></div>","</div>","</div>","</div>","</div>"].join("\n")),$("body").append(e)),$(".modal-title",e).html(t.title),$(".modal-body",e).html(t.body),t.footer&&($(".modal-footer",e).length||$(".modal-content",e).append($("<div class='modal-footer'></div>")),$(".modal-content",e).html(t.footer)),e.modal()})}),$(()=>{Shiny.addCustomMessageHandler("dull:download",function(t){if(!(t.filename&&t.token&&t.key))throw"invalid download event";const e="/session/"+t.token+"/download/"+t.key;window.navigator.userAgent;if(ua.indexOf("MSIE ")>0){let n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=(()=>saveAs(n.response,t.filename)),n.send()}else fetch(e).then(t=>t.blob()).then(e=>{saveAs(e,t.filename)})})})}();
//# sourceMappingURL=dull.min.js.map
